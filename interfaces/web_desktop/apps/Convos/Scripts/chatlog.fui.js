/*Â©agpl*************************************************************************
*                                                                              *
* This file is part of FRIEND UNIFYING PLATFORM.                               *
* Copyright (c) Friend Software Labs AS. All rights reserved.                  *
*                                                                              *
* Licensed under the Source EULA. Please refer to the copy of the GNU Affero   *
* General Public License, found in the file license_agpl.txt.                  *
*                                                                              *
*****************************************************************************Â©*/

FriendConvos = window.FriendConvos ? window.FriendConvos : {};
FriendConvos.imageCache = {};

class FUIChatlog extends FUIElement
{
    constructor( options )
    {
        super( options );
        let self = this;
        
        // We use this on our calls
        this.ajaxUniqueId = md5( UniqueHash() );
        if( window.currentChatLog )
        	window.currentChatLog.destroy();
        window.currentChatLog = this
        
        // Dividers for new dates
        self.messageDateDividers = {};
        
        // Do stuff
        this.messageList = {};
        this.messageListOrder = [];
        this.lastId = 0;
        
        // Scrolling
        this.prevScrollTop = 0;
        
        // Load events
        this.loadingData = 0;
        this.loadObjects = {};
        
        this.hasScrolled = false;
        this.scrollEndEvent = function()
        {
        	self.refreshDom();
        }
        
        this.emojis = {
            'Smilies': 'ðŸ˜€ðŸ˜ƒðŸ˜„ðŸ˜ðŸ˜†ðŸ˜…ðŸ˜‚ðŸ¤£ðŸ¥²ðŸ¥¹â˜ºï¸ðŸ˜ŠðŸ˜‡ðŸ™‚ðŸ™ƒðŸ˜‰ðŸ˜ŒðŸ˜ðŸ¥°ðŸ˜˜ðŸ˜—ðŸ˜™ðŸ˜šðŸ˜‹ðŸ˜›ðŸ˜ðŸ˜œðŸ¤ªðŸ¤¨ðŸ§ðŸ¤“ðŸ˜ŽðŸ¥¸ðŸ¤©ðŸ¥³ðŸ˜ðŸ˜’ðŸ˜žðŸ˜”ðŸ˜ŸðŸ˜•ðŸ™â˜¹ï¸ðŸ˜£ðŸ˜–ðŸ˜«ðŸ˜©ðŸ¥ºðŸ˜¢ðŸ˜­ðŸ˜®â€ðŸ’¨ðŸ˜¤ðŸ˜ ðŸ˜¡ðŸ¤¬ðŸ¤¯ðŸ˜³ðŸ¥µðŸ¥¶ðŸ˜±ðŸ˜¨ðŸ˜°ðŸ˜¥ðŸ˜“ðŸ«£ðŸ¤—ðŸ«¡ðŸ¤”ðŸ«¢ðŸ¤­ðŸ¤«ðŸ¤¥ðŸ˜¶ðŸ˜¶â€ðŸŒ«ï¸ðŸ˜ðŸ˜‘ðŸ˜¬ðŸ«¨ðŸ« ðŸ™„ðŸ˜¯ðŸ˜¦ðŸ˜§ðŸ˜®ðŸ˜²ðŸ¥±ðŸ˜´ðŸ¤¤ðŸ˜ªðŸ˜µðŸ˜µâ€ðŸ’«ðŸ«¥ðŸ¤ðŸ¥´ðŸ¤¢ðŸ¤®ðŸ¤§ðŸ˜·ðŸ¤’ðŸ¤•ðŸ¤‘ðŸ¤ ðŸ˜ˆðŸ‘¿ðŸ‘¹ðŸ‘ºðŸ¤¡ðŸ’©ðŸ‘»ðŸ’€â˜ ï¸ðŸ‘½ðŸ‘¾ðŸ¤–ðŸŽƒðŸ˜ºðŸ˜¸ðŸ˜¹ðŸ˜»ðŸ˜¼ðŸ˜½ðŸ™€ðŸ˜¿ðŸ˜¾',
            'Gestures and bodyparts': 'ðŸ‘‹ðŸ¤šðŸ–âœ‹ðŸ––ðŸ‘ŒðŸ¤ŒðŸ¤âœŒï¸ðŸ¤žðŸ«°ðŸ¤ŸðŸ¤˜ðŸ¤™ðŸ«µðŸ«±ðŸ«²ðŸ«¸ðŸ«·ðŸ«³ðŸ«´ðŸ‘ˆðŸ‘‰ðŸ‘†ðŸ–•ðŸ‘‡â˜ï¸ðŸ‘ðŸ‘ŽâœŠðŸ‘ŠðŸ¤›ðŸ¤œðŸ‘ðŸ«¶ðŸ™ŒðŸ‘ðŸ¤²ðŸ¤ðŸ™âœï¸ðŸ’…ðŸ¤³ðŸ’ªðŸ¦¾ðŸ¦µðŸ¦¿ðŸ¦¶ðŸ‘£ðŸ‘‚ðŸ¦»ðŸ‘ƒðŸ«€ðŸ«ðŸ§ ðŸ¦·ðŸ¦´ðŸ‘€ðŸ‘ðŸ‘…ðŸ‘„ðŸ«¦ðŸ’‹ðŸ©¸',
            'People and fantasy': 'ðŸ‘¶ðŸ‘§ðŸ§’ðŸ‘¦ðŸ‘©ðŸ§‘ðŸ‘¨ðŸ‘©â€ðŸ¦±ðŸ§‘â€ðŸ¦±ðŸ‘¨â€ðŸ¦±ðŸ‘©â€ðŸ¦°ðŸ§‘â€ðŸ¦°ðŸ‘¨â€ðŸ¦°ðŸ‘±â€â™€ï¸ðŸ‘±ðŸ‘±â€â™‚ï¸ðŸ‘©â€ðŸ¦³ðŸ§‘â€ðŸ¦³ðŸ‘¨â€ðŸ¦³ðŸ‘©â€ðŸ¦²ðŸ§‘â€ðŸ¦²ðŸ‘¨â€ðŸ¦²ðŸ§”â€â™€ï¸ðŸ§”ðŸ§”â€â™‚ï¸ðŸ‘µðŸ§“ðŸ‘´ðŸ‘²ðŸ‘³â€â™€ï¸ðŸ‘³ðŸ‘³â€â™‚ï¸ðŸ§•ðŸ‘®â€â™€ï¸ðŸ‘®ðŸ‘®â€â™‚ï¸ðŸ‘·â€â™€ï¸ðŸ‘·ðŸ‘·â€â™‚ï¸ðŸ’‚â€â™€ï¸ðŸ’‚ðŸ’‚â€â™‚ï¸ðŸ•µï¸â€â™€ï¸ðŸ•µï¸ðŸ•µï¸â€â™‚ï¸ðŸ‘©â€âš•ï¸ðŸ§‘â€âš•ï¸ðŸ‘¨â€âš•ï¸ðŸ‘©â€ðŸŒ¾ðŸ§‘â€ðŸŒ¾ðŸ‘¨â€ðŸŒ¾ðŸ‘©â€ðŸ³ðŸ§‘â€ðŸ³ðŸ‘¨â€ðŸ³ðŸ‘©â€ðŸŽ“ðŸ§‘â€ðŸŽ“ðŸ‘¨â€ðŸŽ“ðŸ‘©â€ðŸŽ¤ðŸ§‘â€ðŸŽ¤ðŸ‘¨â€ðŸŽ¤ðŸ‘©â€ðŸ«ðŸ§‘â€ðŸ«ðŸ‘¨â€ðŸ«ðŸ‘©â€ðŸ­ðŸ§‘â€ðŸ­ðŸ‘¨â€ðŸ­ðŸ‘©â€ðŸ’»ðŸ§‘â€ðŸ’»ðŸ‘¨â€ðŸ’»ðŸ‘©â€ðŸ’¼ðŸ§‘â€ðŸ’¼ðŸ‘¨â€ðŸ’¼ðŸ‘©â€ðŸ”§ðŸ§‘â€ðŸ”§ðŸ‘¨â€ðŸ”§ðŸ‘©â€ðŸ”¬ðŸ§‘â€ðŸ”¬ðŸ‘¨â€ðŸ”¬ðŸ‘©â€ðŸŽ¨ðŸ§‘â€ðŸŽ¨ðŸ‘¨â€ðŸŽ¨ðŸ‘©â€ðŸš’ðŸ§‘â€ðŸš’ðŸ‘¨â€ðŸš’ðŸ‘©â€âœˆï¸ðŸ§‘â€âœˆï¸ðŸ‘¨â€âœˆï¸ðŸ‘©â€ðŸš€ðŸ§‘â€ðŸš€ðŸ‘¨â€ðŸš€ðŸ‘©â€âš–ï¸ðŸ§‘â€âš–ï¸ðŸ‘¨â€âš–ï¸ðŸ‘°â€â™€ï¸ðŸ‘°ðŸ‘°â€â™‚ï¸ðŸ¤µâ€â™€ï¸ðŸ¤µðŸ¤µâ€â™‚ï¸ðŸ‘¸ðŸ«…ðŸ¤´ðŸ¥·ðŸ¦¸â€â™€ï¸ðŸ¦¸ðŸ¦¸â€â™‚ï¸ðŸ¦¹â€â™€ï¸ðŸ¦¹ðŸ¦¹â€â™‚ï¸ðŸ¤¶ðŸ§‘â€ðŸŽ„ðŸŽ…ðŸ§™â€â™€ï¸ðŸ§™ðŸ§™â€â™‚ï¸ðŸ§â€â™€ï¸ðŸ§ðŸ§â€â™‚ï¸ðŸ§›â€â™€ï¸ðŸ§›ðŸ§›â€â™‚ï¸ðŸ§Ÿâ€â™€ï¸ðŸ§ŸðŸ§Ÿâ€â™‚ï¸ðŸ§žâ€â™€ï¸ðŸ§žðŸ§žâ€â™‚ï¸ðŸ§œâ€â™€ï¸ðŸ§œðŸ§œâ€â™‚ï¸ðŸ§šâ€â™€ï¸ðŸ§šðŸ§šâ€â™‚ï¸ðŸ§ŒðŸ‘¼ðŸ¤°ðŸ«„ðŸ«ƒðŸ¤±ðŸ‘©â€ðŸ¼ðŸ§‘â€ðŸ¼ðŸ‘¨â€ðŸ¼ðŸ™‡â€â™€ï¸ðŸ™‡ðŸ™‡â€â™‚ï¸ðŸ’â€â™€ï¸ðŸ’ðŸ’â€â™‚ï¸ðŸ™…â€â™€ï¸ðŸ™…ðŸ™…â€â™‚ï¸ðŸ™†â€â™€ï¸ðŸ™†ðŸ™†â€â™‚ï¸ðŸ™‹â€â™€ï¸ðŸ™‹ðŸ™‹â€â™‚ï¸ðŸ§â€â™€ï¸ðŸ§ðŸ§â€â™‚ï¸ðŸ¤¦â€â™€ï¸ðŸ¤¦ðŸ¤¦â€â™‚ï¸ðŸ¤·â€â™€ï¸ðŸ¤·ðŸ¤·â€â™‚ï¸ðŸ™Žâ€â™€ï¸ðŸ™ŽðŸ™Žâ€â™‚ï¸ðŸ™â€â™€ï¸ðŸ™ðŸ™â€â™‚ï¸ðŸ’‡â€â™€ï¸ðŸ’‡ðŸ’‡â€â™‚ï¸ðŸ’†â€â™€ï¸ðŸ’†ðŸ’†â€â™‚ï¸ðŸ§–â€â™€ï¸ðŸ§–ðŸ§–â€â™‚ï¸ðŸ’…ðŸ¤³ðŸ’ƒðŸ•ºðŸ‘¯â€â™€ï¸ðŸ‘¯ðŸ‘¯â€â™‚ï¸ðŸ•´ðŸ‘©â€ðŸ¦½ðŸ§‘â€ðŸ¦½ðŸ‘¨â€ðŸ¦½ðŸ‘©â€ðŸ¦¼ðŸ§‘â€ðŸ¦¼ðŸ‘¨â€ðŸ¦¼ðŸš¶â€â™€ï¸ðŸš¶ðŸš¶â€â™‚ï¸ðŸ‘©â€ðŸ¦¯ðŸ§‘â€ðŸ¦¯ðŸ‘¨â€ðŸ¦¯ðŸ§Žâ€â™€ï¸ðŸ§ŽðŸ§Žâ€â™‚ï¸ðŸƒâ€â™€ï¸ðŸƒðŸƒâ€â™‚ï¸ðŸ§â€â™€ï¸ðŸ§ðŸ§â€â™‚ï¸ðŸ‘­ðŸ§‘â€ðŸ¤â€ðŸ§‘ðŸ‘¬ðŸ‘«ðŸ‘©â€â¤ï¸â€ðŸ‘©ðŸ’‘ðŸ‘¨â€â¤ï¸â€ðŸ‘¨ðŸ‘©â€â¤ï¸â€ðŸ‘¨ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘©ðŸ’ðŸ‘¨â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨ðŸ‘ªðŸ‘¨â€ðŸ‘©â€ðŸ‘¦ðŸ‘¨â€ðŸ‘©â€ðŸ‘§ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘§ðŸ‘©â€ðŸ‘©â€ðŸ‘¦ðŸ‘©â€ðŸ‘©â€ðŸ‘§ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ðŸ‘©â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§ðŸ‘¨â€ðŸ‘¦ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦ðŸ‘¨â€ðŸ‘§ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦ðŸ‘¨â€ðŸ‘§â€ðŸ‘§ðŸ‘©â€ðŸ‘¦ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦ðŸ‘©â€ðŸ‘§ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ðŸ‘©â€ðŸ‘§â€ðŸ‘§ðŸ—£ðŸ‘¤ðŸ‘¥ðŸ«‚',
            'Clothing and accessories': 'ðŸ§³ðŸŒ‚â˜‚ï¸ðŸ§µðŸª¡ðŸª¢ðŸª­ðŸ§¶ðŸ‘“ðŸ•¶ðŸ¥½ðŸ¥¼ðŸ¦ºðŸ‘”ðŸ‘•ðŸ‘–ðŸ§£ðŸ§¤ðŸ§¥ðŸ§¦ðŸ‘—ðŸ‘˜ðŸ¥»ðŸ©´ðŸ©±ðŸ©²ðŸ©³ðŸ‘™ðŸ‘šðŸ‘›ðŸ‘œðŸ‘ðŸŽ’ðŸ‘žðŸ‘ŸðŸ¥¾ðŸ¥¿ðŸ‘ ðŸ‘¡ðŸ©°ðŸ‘¢ðŸ‘‘ðŸ‘’ðŸŽ©ðŸŽ“ðŸ§¢â›‘ðŸª–ðŸ’„ðŸ’ðŸ’¼',
            'Pale emojis': 'ðŸ‘‹ðŸ»ðŸ¤šðŸ»ðŸ–ðŸ»âœ‹ðŸ»ðŸ––ðŸ»ðŸ‘ŒðŸ»ðŸ¤ŒðŸ»ðŸ¤ðŸ»âœŒðŸ»ðŸ¤žðŸ»ðŸ«°ðŸ»ðŸ¤ŸðŸ»ðŸ¤˜ðŸ»ðŸ¤™ðŸ»ðŸ«µðŸ»ðŸ«±ðŸ»ðŸ«²ðŸ»ðŸ«¸ðŸ»ðŸ«·ðŸ»ðŸ«³ðŸ»ðŸ«´ðŸ»ðŸ‘ˆðŸ»ðŸ‘‰ðŸ»ðŸ‘†ðŸ»ðŸ–•ðŸ»ðŸ‘‡ðŸ»â˜ðŸ»ðŸ‘ðŸ»ðŸ‘ŽðŸ»âœŠðŸ»ðŸ‘ŠðŸ»ðŸ¤›ðŸ»ðŸ¤œðŸ»ðŸ‘ðŸ»ðŸ«¶ðŸ»ðŸ™ŒðŸ»ðŸ‘ðŸ»ðŸ¤²ðŸ»ðŸ™ðŸ»âœðŸ»ðŸ’…ðŸ»ðŸ¤³ðŸ»ðŸ’ªðŸ»ðŸ¦µðŸ»ðŸ¦¶ðŸ»ðŸ‘‚ðŸ»ðŸ¦»ðŸ»ðŸ‘ƒðŸ»ðŸ‘¶ðŸ»ðŸ‘§ðŸ»ðŸ§’ðŸ»ðŸ‘¦ðŸ»ðŸ‘©ðŸ»ðŸ§‘ðŸ»ðŸ‘¨ðŸ»ðŸ‘©ðŸ»â€ðŸ¦±ðŸ§‘ðŸ»â€ðŸ¦±ðŸ‘¨ðŸ»â€ðŸ¦±ðŸ‘©ðŸ»â€ðŸ¦°ðŸ§‘ðŸ»â€ðŸ¦°ðŸ‘¨ðŸ»â€ðŸ¦°ðŸ‘±ðŸ»â€â™€ï¸ðŸ‘±ðŸ»ðŸ‘±ðŸ»â€â™‚ï¸ðŸ‘©ðŸ»â€ðŸ¦³ðŸ§‘ðŸ»â€ðŸ¦³ðŸ‘¨ðŸ»â€ðŸ¦³ðŸ‘©ðŸ»â€ðŸ¦²ðŸ§‘ðŸ»â€ðŸ¦²ðŸ‘¨ðŸ»â€ðŸ¦²ðŸ§”ðŸ»â€â™€ï¸ðŸ§”ðŸ»ðŸ§”ðŸ»â€â™‚ï¸ðŸ‘µðŸ»ðŸ§“ðŸ»ðŸ‘´ðŸ»ðŸ‘²ðŸ»ðŸ‘³ðŸ»â€â™€ï¸ðŸ‘³ðŸ»ðŸ‘³ðŸ»â€â™‚ï¸ðŸ§•ðŸ»ðŸ‘®ðŸ»â€â™€ï¸ðŸ‘®ðŸ»ðŸ‘®ðŸ»â€â™‚ï¸ðŸ‘·ðŸ»â€â™€ï¸ðŸ‘·ðŸ»ðŸ‘·ðŸ»â€â™‚ï¸ðŸ’‚ðŸ»â€â™€ï¸ðŸ’‚ðŸ»ðŸ’‚ðŸ»â€â™‚ï¸ðŸ•µðŸ»â€â™€ï¸ðŸ•µðŸ»ðŸ•µðŸ»â€â™‚ï¸ðŸ‘©ðŸ»â€âš•ï¸ðŸ§‘ðŸ»â€âš•ï¸ðŸ‘¨ðŸ»â€âš•ï¸ðŸ‘©ðŸ»â€ðŸŒ¾ðŸ§‘ðŸ»â€ðŸŒ¾ðŸ‘¨ðŸ»â€ðŸŒ¾ðŸ‘©ðŸ»â€ðŸ³ðŸ§‘ðŸ»â€ðŸ³ðŸ‘¨ðŸ»â€ðŸ³ðŸ‘©ðŸ»â€ðŸŽ“ðŸ§‘ðŸ»â€ðŸŽ“ðŸ‘¨ðŸ»â€ðŸŽ“ðŸ‘©ðŸ»â€ðŸŽ¤ðŸ§‘ðŸ»â€ðŸŽ¤ðŸ‘¨ðŸ»â€ðŸŽ¤ðŸ‘©ðŸ»â€ðŸ«ðŸ§‘ðŸ»â€ðŸ«ðŸ‘¨ðŸ»â€ðŸ«ðŸ‘©ðŸ»â€ðŸ­ðŸ§‘ðŸ»â€ðŸ­ðŸ‘¨ðŸ»â€ðŸ­ðŸ‘©ðŸ»â€ðŸ’»ðŸ§‘ðŸ»â€ðŸ’»ðŸ‘¨ðŸ»â€ðŸ’»ðŸ‘©ðŸ»â€ðŸ’¼ðŸ§‘ðŸ»â€ðŸ’¼ðŸ‘¨ðŸ»â€ðŸ’¼ðŸ‘©ðŸ»â€ðŸ”§ðŸ§‘ðŸ»â€ðŸ”§ðŸ‘¨ðŸ»â€ðŸ”§ðŸ‘©ðŸ»â€ðŸ”¬ðŸ§‘ðŸ»â€ðŸ”¬ðŸ‘¨ðŸ»â€ðŸ”¬ðŸ‘©ðŸ»â€ðŸŽ¨ðŸ§‘ðŸ»â€ðŸŽ¨ðŸ‘¨ðŸ»â€ðŸŽ¨ðŸ‘©ðŸ»â€ðŸš’ðŸ§‘ðŸ»â€ðŸš’ðŸ‘¨ðŸ»â€ðŸš’ðŸ‘©ðŸ»â€âœˆï¸ðŸ§‘ðŸ»â€âœˆï¸ðŸ‘¨ðŸ»â€âœˆï¸ðŸ‘©ðŸ»â€ðŸš€ðŸ§‘ðŸ»â€ðŸš€ðŸ‘¨ðŸ»â€ðŸš€ðŸ‘©ðŸ»â€âš–ï¸ðŸ§‘ðŸ»â€âš–ï¸ðŸ‘¨ðŸ»â€âš–ï¸ðŸ‘°ðŸ»â€â™€ï¸ðŸ‘°ðŸ»ðŸ‘°ðŸ»â€â™‚ï¸ðŸ¤µðŸ»â€â™€ï¸ðŸ¤µðŸ»ðŸ¤µðŸ»â€â™‚ï¸ðŸ‘¸ðŸ»ðŸ«…ðŸ»ðŸ¤´ðŸ»ðŸ¥·ðŸ»ðŸ¦¸ðŸ»â€â™€ï¸ðŸ¦¸ðŸ»ðŸ¦¸ðŸ»â€â™‚ï¸ðŸ¦¹ðŸ»â€â™€ï¸ðŸ¦¹ðŸ»ðŸ¦¹ðŸ»â€â™‚ï¸ðŸ¤¶ðŸ»ðŸ§‘ðŸ»â€ðŸŽ„ðŸŽ…ðŸ»ðŸ§™ðŸ»â€â™€ï¸ðŸ§™ðŸ»ðŸ§™ðŸ»â€â™‚ï¸ðŸ§ðŸ»â€â™€ï¸ðŸ§ðŸ»ðŸ§ðŸ»â€â™‚ï¸ðŸ§›ðŸ»â€â™€ï¸ðŸ§›ðŸ»ðŸ§›ðŸ»â€â™‚ï¸ðŸ§œðŸ»â€â™€ï¸ðŸ§œðŸ»ðŸ§œðŸ»â€â™‚ï¸ðŸ§šðŸ»â€â™€ï¸ðŸ§šðŸ»ðŸ§šðŸ»â€â™‚ï¸ðŸ‘¼ðŸ»ðŸ¤°ðŸ»ðŸ«„ðŸ»ðŸ«ƒðŸ»ðŸ¤±ðŸ»ðŸ‘©ðŸ»â€ðŸ¼ðŸ§‘ðŸ»â€ðŸ¼ðŸ‘¨ðŸ»â€ðŸ¼ðŸ™‡ðŸ»â€â™€ï¸ðŸ™‡ðŸ»ðŸ™‡ðŸ»â€â™‚ï¸ðŸ’ðŸ»â€â™€ï¸ðŸ’ðŸ»ðŸ’ðŸ»â€â™‚ï¸ðŸ™…ðŸ»â€â™€ï¸ðŸ™…ðŸ»ðŸ™…ðŸ»â€â™‚ï¸ðŸ™†ðŸ»â€â™€ï¸ðŸ™†ðŸ»ðŸ™†ðŸ»â€â™‚ï¸ðŸ™‹ðŸ»â€â™€ï¸ðŸ™‹ðŸ»ðŸ™‹ðŸ»â€â™‚ï¸ðŸ§ðŸ»â€â™€ï¸ðŸ§ðŸ»ðŸ§ðŸ»â€â™‚ï¸ðŸ¤¦ðŸ»â€â™€ï¸ðŸ¤¦ðŸ»ðŸ¤¦ðŸ»â€â™‚ï¸ðŸ¤·ðŸ»â€â™€ï¸ðŸ¤·ðŸ»ðŸ¤·ðŸ»â€â™‚ï¸ðŸ™ŽðŸ»â€â™€ï¸ðŸ™ŽðŸ»ðŸ™ŽðŸ»â€â™‚ï¸ðŸ™ðŸ»â€â™€ï¸ðŸ™ðŸ»ðŸ™ðŸ»â€â™‚ï¸ðŸ’‡ðŸ»â€â™€ï¸ðŸ’‡ðŸ»ðŸ’‡ðŸ»â€â™‚ï¸ðŸ’†ðŸ»â€â™€ï¸ðŸ’†ðŸ»ðŸ’†ðŸ»â€â™‚ï¸ðŸ§–ðŸ»â€â™€ï¸ðŸ§–ðŸ»ðŸ§–ðŸ»â€â™‚ï¸ðŸ’ƒðŸ»ðŸ•ºðŸ»ðŸ•´ðŸ»ðŸ‘©ðŸ»â€ðŸ¦½ðŸ§‘ðŸ»â€ðŸ¦½ðŸ‘¨ðŸ»â€ðŸ¦½ðŸ‘©ðŸ»â€ðŸ¦¼ðŸ§‘ðŸ»â€ðŸ¦¼ðŸ‘¨ðŸ»â€ðŸ¦¼ðŸš¶ðŸ»â€â™€ï¸ðŸš¶ðŸ»ðŸš¶ðŸ»â€â™‚ï¸ðŸ‘©ðŸ»â€ðŸ¦¯ðŸ§‘ðŸ»â€ðŸ¦¯ðŸ‘¨ðŸ»â€ðŸ¦¯ðŸ§ŽðŸ»â€â™€ï¸ðŸ§ŽðŸ»ðŸ§ŽðŸ»â€â™‚ï¸ðŸƒðŸ»â€â™€ï¸ðŸƒðŸ»ðŸƒðŸ»â€â™‚ï¸ðŸ§ðŸ»â€â™€ï¸ðŸ§ðŸ»ðŸ§ðŸ»â€â™‚ï¸ðŸ‘­ðŸ»ðŸ§‘ðŸ»â€ðŸ¤â€ðŸ§‘ðŸ»ðŸ‘¬ðŸ»ðŸ‘«ðŸ»ðŸ§—ðŸ»â€â™€ï¸ðŸ§—ðŸ»ðŸ§—ðŸ»â€â™‚ï¸ðŸ‡ðŸ»ðŸ‚ðŸ»ðŸŒðŸ»â€â™€ï¸ðŸŒðŸ»ðŸŒðŸ»â€â™‚ï¸ðŸ„ðŸ»â€â™€ï¸ðŸ„ðŸ»ðŸ„ðŸ»â€â™‚ï¸ðŸš£ðŸ»â€â™€ï¸ðŸš£ðŸ»ðŸš£ðŸ»â€â™‚ï¸ðŸŠðŸ»â€â™€ï¸ðŸŠðŸ»ðŸŠðŸ»â€â™‚ï¸â›¹ðŸ»â€â™€ï¸â›¹ðŸ»â›¹ðŸ»â€â™‚ï¸ðŸ‹ðŸ»â€â™€ï¸ðŸ‹ðŸ»ðŸ‹ðŸ»â€â™‚ï¸ðŸš´ðŸ»â€â™€ï¸ðŸš´ðŸ»ðŸš´ðŸ»â€â™‚ï¸ðŸšµðŸ»â€â™€ï¸ðŸšµðŸ»ðŸšµðŸ»â€â™‚ï¸ðŸ¤¸ðŸ»â€â™€ï¸ðŸ¤¸ðŸ»ðŸ¤¸ðŸ»â€â™‚ï¸ðŸ¤½ðŸ»â€â™€ï¸ðŸ¤½ðŸ»ðŸ¤½ðŸ»â€â™‚ï¸ðŸ¤¾ðŸ»â€â™€ï¸ðŸ¤¾ðŸ»ðŸ¤¾ðŸ»â€â™‚ï¸ðŸ¤¹ðŸ»â€â™€ï¸ðŸ¤¹ðŸ»ðŸ¤¹ðŸ»â€â™‚ï¸ðŸ§˜ðŸ»â€â™€ï¸ðŸ§˜ðŸ»ðŸ§˜ðŸ»â€â™‚ï¸ðŸ›€ðŸ»ðŸ›ŒðŸ»',
            'Cream white emojis': 'ðŸ‘‹ðŸ¼ðŸ¤šðŸ¼ðŸ–ðŸ¼âœ‹ðŸ¼ðŸ––ðŸ¼ðŸ‘ŒðŸ¼ðŸ¤ŒðŸ¼ðŸ¤ðŸ¼âœŒðŸ¼ðŸ¤žðŸ¼ðŸ«°ðŸ¼ðŸ¤ŸðŸ¼ðŸ¤˜ðŸ¼ðŸ¤™ðŸ¼ðŸ«µðŸ¼ðŸ«±ðŸ¼ðŸ«²ðŸ¼ðŸ«¸ðŸ¼ðŸ«·ðŸ¼ðŸ«³ðŸ¼ðŸ«´ðŸ¼ðŸ‘ˆðŸ¼ðŸ‘‰ðŸ¼ðŸ‘†ðŸ¼ðŸ–•ðŸ¼ðŸ‘‡ðŸ¼â˜ðŸ¼ðŸ‘ðŸ¼ðŸ‘ŽðŸ¼âœŠðŸ¼ðŸ‘ŠðŸ¼ðŸ¤›ðŸ¼ðŸ¤œðŸ¼ðŸ‘ðŸ¼ðŸ«¶ðŸ¼ðŸ™ŒðŸ¼ðŸ‘ðŸ¼ðŸ¤²ðŸ¼ðŸ™ðŸ¼âœðŸ¼ðŸ’…ðŸ¼ðŸ¤³ðŸ¼ðŸ’ªðŸ¼ðŸ¦µðŸ¼ðŸ¦¶ðŸ¼ðŸ‘‚ðŸ¼ðŸ¦»ðŸ¼ðŸ‘ƒðŸ¼ðŸ‘¶ðŸ¼ðŸ‘§ðŸ¼ðŸ§’ðŸ¼ðŸ‘¦ðŸ¼ðŸ‘©ðŸ¼ðŸ§‘ðŸ¼ðŸ‘¨ðŸ¼ðŸ‘©ðŸ¼â€ðŸ¦±ðŸ§‘ðŸ¼â€ðŸ¦±ðŸ‘¨ðŸ¼â€ðŸ¦±ðŸ‘©ðŸ¼â€ðŸ¦°ðŸ§‘ðŸ¼â€ðŸ¦°ðŸ‘¨ðŸ¼â€ðŸ¦°ðŸ‘±ðŸ¼â€â™€ï¸ðŸ‘±ðŸ¼ðŸ‘±ðŸ¼â€â™‚ï¸ðŸ‘©ðŸ¼â€ðŸ¦³ðŸ§‘ðŸ¼â€ðŸ¦³ðŸ‘¨ðŸ¼â€ðŸ¦³ðŸ‘©ðŸ¼â€ðŸ¦²ðŸ§‘ðŸ¼â€ðŸ¦²ðŸ‘¨ðŸ¼â€ðŸ¦²ðŸ§”ðŸ¼â€â™€ï¸ðŸ§”ðŸ¼ðŸ§”ðŸ¼â€â™‚ï¸ðŸ‘µðŸ¼ðŸ§“ðŸ¼ðŸ‘´ðŸ¼ðŸ‘²ðŸ¼ðŸ‘³ðŸ¼â€â™€ï¸ðŸ‘³ðŸ¼ðŸ‘³ðŸ¼â€â™‚ï¸ðŸ§•ðŸ¼ðŸ‘®ðŸ¼â€â™€ï¸ðŸ‘®ðŸ¼ðŸ‘®ðŸ¼â€â™‚ï¸ðŸ‘·ðŸ¼â€â™€ï¸ðŸ‘·ðŸ¼ðŸ‘·ðŸ¼â€â™‚ï¸ðŸ’‚ðŸ¼â€â™€ï¸ðŸ’‚ðŸ¼ðŸ’‚ðŸ¼â€â™‚ï¸ðŸ•µðŸ¼â€â™€ï¸ðŸ•µðŸ¼ðŸ•µðŸ¼â€â™‚ï¸ðŸ‘©ðŸ¼â€âš•ï¸ðŸ§‘ðŸ¼â€âš•ï¸ðŸ‘¨ðŸ¼â€âš•ï¸ðŸ‘©ðŸ¼â€ðŸŒ¾ðŸ§‘ðŸ¼â€ðŸŒ¾ðŸ‘¨ðŸ¼â€ðŸŒ¾ðŸ‘©ðŸ¼â€ðŸ³ðŸ§‘ðŸ¼â€ðŸ³ðŸ‘¨ðŸ¼â€ðŸ³ðŸ‘©ðŸ¼â€ðŸŽ“ðŸ§‘ðŸ¼â€ðŸŽ“ðŸ‘¨ðŸ¼â€ðŸŽ“ðŸ‘©ðŸ¼â€ðŸŽ¤ðŸ§‘ðŸ¼â€ðŸŽ¤ðŸ‘¨ðŸ¼â€ðŸŽ¤ðŸ‘©ðŸ¼â€ðŸ«ðŸ§‘ðŸ¼â€ðŸ«ðŸ‘¨ðŸ¼â€ðŸ«ðŸ‘©ðŸ¼â€ðŸ­ðŸ§‘ðŸ¼â€ðŸ­ðŸ‘¨ðŸ¼â€ðŸ­ðŸ‘©ðŸ¼â€ðŸ’»ðŸ§‘ðŸ¼â€ðŸ’»ðŸ‘¨ðŸ¼â€ðŸ’»ðŸ‘©ðŸ¼â€ðŸ’¼ðŸ§‘ðŸ¼â€ðŸ’¼ðŸ‘¨ðŸ¼â€ðŸ’¼ðŸ‘©ðŸ¼â€ðŸ”§ðŸ§‘ðŸ¼â€ðŸ”§ðŸ‘¨ðŸ¼â€ðŸ”§ðŸ‘©ðŸ¼â€ðŸ”¬ðŸ§‘ðŸ¼â€ðŸ”¬ðŸ‘¨ðŸ¼â€ðŸ”¬ðŸ‘©ðŸ¼â€ðŸŽ¨ðŸ§‘ðŸ¼â€ðŸŽ¨ðŸ‘¨ðŸ¼â€ðŸŽ¨ðŸ‘©ðŸ¼â€ðŸš’ðŸ§‘ðŸ¼â€ðŸš’ðŸ‘¨ðŸ¼â€ðŸš’ðŸ‘©ðŸ¼â€âœˆï¸ðŸ§‘ðŸ¼â€âœˆï¸ðŸ‘¨ðŸ¼â€âœˆï¸ðŸ‘©ðŸ¼â€ðŸš€ðŸ§‘ðŸ¼â€ðŸš€ðŸ‘¨ðŸ¼â€ðŸš€ðŸ‘©ðŸ¼â€âš–ï¸ðŸ§‘ðŸ¼â€âš–ï¸ðŸ‘¨ðŸ¼â€âš–ï¸ðŸ‘°ðŸ¼â€â™€ï¸ðŸ‘°ðŸ¼ðŸ‘°ðŸ¼â€â™‚ï¸ðŸ¤µðŸ¼â€â™€ï¸ðŸ¤µðŸ¼ðŸ¤µðŸ¼â€â™‚ï¸ðŸ‘¸ðŸ¼ðŸ«…ðŸ¼ðŸ¤´ðŸ¼ðŸ¥·ðŸ¼ðŸ¦¸ðŸ¼â€â™€ï¸ðŸ¦¸ðŸ¼ðŸ¦¸ðŸ¼â€â™‚ï¸ðŸ¦¹ðŸ¼â€â™€ï¸ðŸ¦¹ðŸ¼ðŸ¦¹ðŸ¼â€â™‚ï¸ðŸ¤¶ðŸ¼ðŸ§‘ðŸ¼â€ðŸŽ„ðŸŽ…ðŸ¼ðŸ§™ðŸ¼â€â™€ï¸ðŸ§™ðŸ¼ðŸ§™ðŸ¼â€â™‚ï¸ðŸ§ðŸ¼â€â™€ï¸ðŸ§ðŸ¼ðŸ§ðŸ¼â€â™‚ï¸ðŸ§›ðŸ¼â€â™€ï¸ðŸ§›ðŸ¼ðŸ§›ðŸ¼â€â™‚ï¸ðŸ§œðŸ¼â€â™€ï¸ðŸ§œðŸ¼ðŸ§œðŸ¼â€â™‚ï¸ðŸ§šðŸ¼â€â™€ï¸ðŸ§šðŸ¼ðŸ§šðŸ¼â€â™‚ï¸ðŸ‘¼ðŸ¼ðŸ¤°ðŸ¼ðŸ«„ðŸ¼ðŸ«ƒðŸ¼ðŸ¤±ðŸ¼ðŸ‘©ðŸ¼â€ðŸ¼ðŸ§‘ðŸ¼â€ðŸ¼ðŸ‘¨ðŸ¼â€ðŸ¼ðŸ™‡ðŸ¼â€â™€ï¸ðŸ™‡ðŸ¼ðŸ™‡ðŸ¼â€â™‚ï¸ðŸ’ðŸ¼â€â™€ï¸ðŸ’ðŸ¼ðŸ’ðŸ¼â€â™‚ï¸ðŸ™…ðŸ¼â€â™€ï¸ðŸ™…ðŸ¼ðŸ™…ðŸ¼â€â™‚ï¸ðŸ™†ðŸ¼â€â™€ï¸ðŸ™†ðŸ¼ðŸ™†ðŸ¼â€â™‚ï¸ðŸ™‹ðŸ¼â€â™€ï¸ðŸ™‹ðŸ¼ðŸ™‹ðŸ¼â€â™‚ï¸ðŸ§ðŸ¼â€â™€ï¸ðŸ§ðŸ¼ðŸ§ðŸ¼â€â™‚ï¸ðŸ¤¦ðŸ¼â€â™€ï¸ðŸ¤¦ðŸ¼ðŸ¤¦ðŸ¼â€â™‚ï¸ðŸ¤·ðŸ¼â€â™€ï¸ðŸ¤·ðŸ¼ðŸ¤·ðŸ¼â€â™‚ï¸ðŸ™ŽðŸ¼â€â™€ï¸ðŸ™ŽðŸ¼ðŸ™ŽðŸ¼â€â™‚ï¸ðŸ™ðŸ¼â€â™€ï¸ðŸ™ðŸ¼ðŸ™ðŸ¼â€â™‚ï¸ðŸ’‡ðŸ¼â€â™€ï¸ðŸ’‡ðŸ¼ðŸ’‡ðŸ¼â€â™‚ï¸ðŸ’†ðŸ¼â€â™€ï¸ðŸ’†ðŸ¼ðŸ’†ðŸ¼â€â™‚ï¸ðŸ§–ðŸ¼â€â™€ï¸ðŸ§–ðŸ¼ðŸ§–ðŸ¼â€â™‚ï¸ðŸ’ƒðŸ¼ðŸ•ºðŸ¼ðŸ•´ðŸ¼ðŸ‘©ðŸ¼â€ðŸ¦½ðŸ§‘ðŸ¼â€ðŸ¦½ðŸ‘¨ðŸ¼â€ðŸ¦½ðŸ‘©ðŸ¼â€ðŸ¦¼ðŸ§‘ðŸ¼â€ðŸ¦¼ðŸ‘¨ðŸ¼â€ðŸ¦¼ðŸš¶ðŸ¼â€â™€ï¸ðŸš¶ðŸ¼ðŸš¶ðŸ¼â€â™‚ï¸ðŸ‘©ðŸ¼â€ðŸ¦¯ðŸ§‘ðŸ¼â€ðŸ¦¯ðŸ‘¨ðŸ¼â€ðŸ¦¯ðŸ§ŽðŸ¼â€â™€ï¸ðŸ§ŽðŸ¼ðŸ§ŽðŸ¼â€â™‚ï¸ðŸƒðŸ¼â€â™€ï¸ðŸƒðŸ¼ðŸƒðŸ¼â€â™‚ï¸ðŸ§ðŸ¼â€â™€ï¸ðŸ§ðŸ¼ðŸ§ðŸ¼â€â™‚ï¸ðŸ‘­ðŸ¼ðŸ§‘ðŸ¼â€ðŸ¤â€ðŸ§‘ðŸ¼ðŸ‘¬ðŸ¼ðŸ‘«ðŸ¼ðŸ§—ðŸ¼â€â™€ï¸ðŸ§—ðŸ¼ðŸ§—ðŸ¼â€â™‚ï¸ðŸ‡ðŸ¼ðŸ‚ðŸ¼ðŸŒðŸ¼â€â™€ï¸ðŸŒðŸ¼ðŸŒðŸ¼â€â™‚ï¸ðŸ„ðŸ¼â€â™€ï¸ðŸ„ðŸ¼ðŸ„ðŸ¼â€â™‚ï¸ðŸš£ðŸ¼â€â™€ï¸ðŸš£ðŸ¼ðŸš£ðŸ¼â€â™‚ï¸ðŸŠðŸ¼â€â™€ï¸ðŸŠðŸ¼ðŸŠðŸ¼â€â™‚ï¸â›¹ðŸ¼â€â™€ï¸â›¹ðŸ¼â›¹ðŸ¼â€â™‚ï¸ðŸ‹ðŸ¼â€â™€ï¸ðŸ‹ðŸ¼ðŸ‹ðŸ¼â€â™‚ï¸ðŸš´ðŸ¼â€â™€ï¸ðŸš´ðŸ¼ðŸš´ðŸ¼â€â™‚ï¸ðŸšµðŸ¼â€â™€ï¸ðŸšµðŸ¼ðŸšµðŸ¼â€â™‚ï¸ðŸ¤¸ðŸ¼â€â™€ï¸ðŸ¤¸ðŸ¼ðŸ¤¸ðŸ¼â€â™‚ï¸ðŸ¤½ðŸ¼â€â™€ï¸ðŸ¤½ðŸ¼ðŸ¤½ðŸ¼â€â™‚ï¸ðŸ¤¾ðŸ¼â€â™€ï¸ðŸ¤¾ðŸ¼ðŸ¤¾ðŸ¼â€â™‚ï¸ðŸ¤¹ðŸ¼â€â™€ï¸ðŸ¤¹ðŸ¼ðŸ¤¹ðŸ¼â€â™‚ï¸ðŸ§˜ðŸ¼â€â™€ï¸ðŸ§˜ðŸ¼ðŸ§˜ðŸ¼â€â™‚ï¸ðŸ›€ðŸ¼ðŸ›ŒðŸ¼',
            'Brown emojis': 'ðŸ‘‹ðŸ½ðŸ¤šðŸ½ðŸ–ðŸ½âœ‹ðŸ½ðŸ––ðŸ½ðŸ‘ŒðŸ½ðŸ¤ŒðŸ½ðŸ¤ðŸ½âœŒðŸ½ðŸ¤žðŸ½ðŸ«°ðŸ½ðŸ¤ŸðŸ½ðŸ¤˜ðŸ½ðŸ¤™ðŸ½ðŸ«µðŸ½ðŸ«±ðŸ½ðŸ«²ðŸ½ðŸ«¸ðŸ½ðŸ«·ðŸ½ðŸ«³ðŸ½ðŸ«´ðŸ½ðŸ‘ˆðŸ½ðŸ‘‰ðŸ½ðŸ‘†ðŸ½ðŸ–•ðŸ½ðŸ‘‡ðŸ½â˜ðŸ½ðŸ‘ðŸ½ðŸ‘ŽðŸ½âœŠðŸ½ðŸ‘ŠðŸ½ðŸ¤›ðŸ½ðŸ¤œðŸ½ðŸ‘ðŸ½ðŸ«¶ðŸ½ðŸ™ŒðŸ½ðŸ‘ðŸ½ðŸ¤²ðŸ½ðŸ™ðŸ½âœðŸ½ðŸ’…ðŸ½ðŸ¤³ðŸ½ðŸ’ªðŸ½ðŸ¦µðŸ½ðŸ¦¶ðŸ½ðŸ‘‚ðŸ½ðŸ¦»ðŸ½ðŸ‘ƒðŸ½ðŸ‘¶ðŸ½ðŸ‘§ðŸ½ðŸ§’ðŸ½ðŸ‘¦ðŸ½ðŸ‘©ðŸ½ðŸ§‘ðŸ½ðŸ‘¨ðŸ½ðŸ‘©ðŸ½â€ðŸ¦±ðŸ§‘ðŸ½â€ðŸ¦±ðŸ‘¨ðŸ½â€ðŸ¦±ðŸ‘©ðŸ½â€ðŸ¦°ðŸ§‘ðŸ½â€ðŸ¦°ðŸ‘¨ðŸ½â€ðŸ¦°ðŸ‘±ðŸ½â€â™€ï¸ðŸ‘±ðŸ½ðŸ‘±ðŸ½â€â™‚ï¸ðŸ‘©ðŸ½â€ðŸ¦³ðŸ§‘ðŸ½â€ðŸ¦³ðŸ‘¨ðŸ½â€ðŸ¦³ðŸ‘©ðŸ½â€ðŸ¦²ðŸ§‘ðŸ½â€ðŸ¦²ðŸ‘¨ðŸ½â€ðŸ¦²ðŸ§”ðŸ½â€â™€ï¸ðŸ§”ðŸ½ðŸ§”ðŸ½â€â™‚ï¸ðŸ‘µðŸ½ðŸ§“ðŸ½ðŸ‘´ðŸ½ðŸ‘²ðŸ½ðŸ‘³ðŸ½â€â™€ï¸ðŸ‘³ðŸ½ðŸ‘³ðŸ½â€â™‚ï¸ðŸ§•ðŸ½ðŸ‘®ðŸ½â€â™€ï¸ðŸ‘®ðŸ½ðŸ‘®ðŸ½â€â™‚ï¸ðŸ‘·ðŸ½â€â™€ï¸ðŸ‘·ðŸ½ðŸ‘·ðŸ½â€â™‚ï¸ðŸ’‚ðŸ½â€â™€ï¸ðŸ’‚ðŸ½ðŸ’‚ðŸ½â€â™‚ï¸ðŸ•µðŸ½â€â™€ï¸ðŸ•µðŸ½ðŸ•µðŸ½â€â™‚ï¸ðŸ‘©ðŸ½â€âš•ï¸ðŸ§‘ðŸ½â€âš•ï¸ðŸ‘¨ðŸ½â€âš•ï¸ðŸ‘©ðŸ½â€ðŸŒ¾ðŸ§‘ðŸ½â€ðŸŒ¾ðŸ‘¨ðŸ½â€ðŸŒ¾ðŸ‘©ðŸ½â€ðŸ³ðŸ§‘ðŸ½â€ðŸ³ðŸ‘¨ðŸ½â€ðŸ³ðŸ‘©ðŸ½â€ðŸŽ“ðŸ§‘ðŸ½â€ðŸŽ“ðŸ‘¨ðŸ½â€ðŸŽ“ðŸ‘©ðŸ½â€ðŸŽ¤ðŸ§‘ðŸ½â€ðŸŽ¤ðŸ‘¨ðŸ½â€ðŸŽ¤ðŸ‘©ðŸ½â€ðŸ«ðŸ§‘ðŸ½â€ðŸ«ðŸ‘¨ðŸ½â€ðŸ«ðŸ‘©ðŸ½â€ðŸ­ðŸ§‘ðŸ½â€ðŸ­ðŸ‘¨ðŸ½â€ðŸ­ðŸ‘©ðŸ½â€ðŸ’»ðŸ§‘ðŸ½â€ðŸ’»ðŸ‘¨ðŸ½â€ðŸ’»ðŸ‘©ðŸ½â€ðŸ’¼ðŸ§‘ðŸ½â€ðŸ’¼ðŸ‘¨ðŸ½â€ðŸ’¼ðŸ‘©ðŸ½â€ðŸ”§ðŸ§‘ðŸ½â€ðŸ”§ðŸ‘¨ðŸ½â€ðŸ”§ðŸ‘©ðŸ½â€ðŸ”¬ðŸ§‘ðŸ½â€ðŸ”¬ðŸ‘¨ðŸ½â€ðŸ”¬ðŸ‘©ðŸ½â€ðŸŽ¨ðŸ§‘ðŸ½â€ðŸŽ¨ðŸ‘¨ðŸ½â€ðŸŽ¨ðŸ‘©ðŸ½â€ðŸš’ðŸ§‘ðŸ½â€ðŸš’ðŸ‘¨ðŸ½â€ðŸš’ðŸ‘©ðŸ½â€âœˆï¸ðŸ§‘ðŸ½â€âœˆï¸ðŸ‘¨ðŸ½â€âœˆï¸ðŸ‘©ðŸ½â€ðŸš€ðŸ§‘ðŸ½â€ðŸš€ðŸ‘¨ðŸ½â€ðŸš€ðŸ‘©ðŸ½â€âš–ï¸ðŸ§‘ðŸ½â€âš–ï¸ðŸ‘¨ðŸ½â€âš–ï¸ðŸ‘°ðŸ½â€â™€ï¸ðŸ‘°ðŸ½ðŸ‘°ðŸ½â€â™‚ï¸ðŸ¤µðŸ½â€â™€ï¸ðŸ¤µðŸ½ðŸ¤µðŸ½â€â™‚ï¸ðŸ‘¸ðŸ½ðŸ«…ðŸ½ðŸ¤´ðŸ½ðŸ¥·ðŸ½ðŸ¦¸ðŸ½â€â™€ï¸ðŸ¦¸ðŸ½ðŸ¦¸ðŸ½â€â™‚ï¸ðŸ¦¹ðŸ½â€â™€ï¸ðŸ¦¹ðŸ½ðŸ¦¹ðŸ½â€â™‚ï¸ðŸ¤¶ðŸ½ðŸ§‘ðŸ½â€ðŸŽ„ðŸŽ…ðŸ½ðŸ§™ðŸ½â€â™€ï¸ðŸ§™ðŸ½ðŸ§™ðŸ½â€â™‚ï¸ðŸ§ðŸ½â€â™€ï¸ðŸ§ðŸ½ðŸ§ðŸ½â€â™‚ï¸ðŸ§›ðŸ½â€â™€ï¸ðŸ§›ðŸ½ðŸ§›ðŸ½â€â™‚ï¸ðŸ§œðŸ½â€â™€ï¸ðŸ§œðŸ½ðŸ§œðŸ½â€â™‚ï¸ðŸ§šðŸ½â€â™€ï¸ðŸ§šðŸ½ðŸ§šðŸ½â€â™‚ï¸ðŸ‘¼ðŸ½ðŸ¤°ðŸ½ðŸ«„ðŸ½ðŸ«ƒðŸ½ðŸ¤±ðŸ½ðŸ‘©ðŸ½â€ðŸ¼ðŸ§‘ðŸ½â€ðŸ¼ðŸ‘¨ðŸ½â€ðŸ¼ðŸ™‡ðŸ½â€â™€ï¸ðŸ™‡ðŸ½ðŸ™‡ðŸ½â€â™‚ï¸ðŸ’ðŸ½â€â™€ï¸ðŸ’ðŸ½ðŸ’ðŸ½â€â™‚ï¸ðŸ™…ðŸ½â€â™€ï¸ðŸ™…ðŸ½ðŸ™…ðŸ½â€â™‚ï¸ðŸ™†ðŸ½â€â™€ï¸ðŸ™†ðŸ½ðŸ™†ðŸ½â€â™‚ï¸ðŸ™‹ðŸ½â€â™€ï¸ðŸ™‹ðŸ½ðŸ™‹ðŸ½â€â™‚ï¸ðŸ§ðŸ½â€â™€ï¸ðŸ§ðŸ½ðŸ§ðŸ½â€â™‚ï¸ðŸ¤¦ðŸ½â€â™€ï¸ðŸ¤¦ðŸ½ðŸ¤¦ðŸ½â€â™‚ï¸ðŸ¤·ðŸ½â€â™€ï¸ðŸ¤·ðŸ½ðŸ¤·ðŸ½â€â™‚ï¸ðŸ™ŽðŸ½â€â™€ï¸ðŸ™ŽðŸ½ðŸ™ŽðŸ½â€â™‚ï¸ðŸ™ðŸ½â€â™€ï¸ðŸ™ðŸ½ðŸ™ðŸ½â€â™‚ï¸ðŸ’‡ðŸ½â€â™€ï¸ðŸ’‡ðŸ½ðŸ’‡ðŸ½â€â™‚ï¸ðŸ’†ðŸ½â€â™€ï¸ðŸ’†ðŸ½ðŸ’†ðŸ½â€â™‚ï¸ðŸ§–ðŸ½â€â™€ï¸ðŸ§–ðŸ½ðŸ§–ðŸ½â€â™‚ï¸ðŸ’ƒðŸ½ðŸ•ºðŸ½ðŸ•´ðŸ½ðŸ‘©ðŸ½â€ðŸ¦½ðŸ§‘ðŸ½â€ðŸ¦½ðŸ‘¨ðŸ½â€ðŸ¦½ðŸ‘©ðŸ½â€ðŸ¦¼ðŸ§‘ðŸ½â€ðŸ¦¼ðŸ‘¨ðŸ½â€ðŸ¦¼ðŸš¶ðŸ½â€â™€ï¸ðŸš¶ðŸ½ðŸš¶ðŸ½â€â™‚ï¸ðŸ‘©ðŸ½â€ðŸ¦¯ðŸ§‘ðŸ½â€ðŸ¦¯ðŸ‘¨ðŸ½â€ðŸ¦¯ðŸ§ŽðŸ½â€â™€ï¸ðŸ§ŽðŸ½ðŸ§ŽðŸ½â€â™‚ï¸ðŸƒðŸ½â€â™€ï¸ðŸƒðŸ½ðŸƒðŸ½â€â™‚ï¸ðŸ§ðŸ½â€â™€ï¸ðŸ§ðŸ½ðŸ§ðŸ½â€â™‚ï¸ðŸ‘­ðŸ½ðŸ§‘ðŸ½â€ðŸ¤â€ðŸ§‘ðŸ½ðŸ‘¬ðŸ½ðŸ‘«ðŸ½ðŸ§—ðŸ½â€â™€ï¸ðŸ§—ðŸ½ðŸ§—ðŸ½â€â™‚ï¸ðŸ‡ðŸ½ðŸ‚ðŸ½ðŸŒðŸ½â€â™€ï¸ðŸŒðŸ½ðŸŒðŸ½â€â™‚ï¸ðŸ„ðŸ½â€â™€ï¸ðŸ„ðŸ½ðŸ„ðŸ½â€â™‚ï¸ðŸš£ðŸ½â€â™€ï¸ðŸš£ðŸ½ðŸš£ðŸ½â€â™‚ï¸ðŸŠðŸ½â€â™€ï¸ðŸŠðŸ½ðŸŠðŸ½â€â™‚ï¸â›¹ðŸ½â€â™€ï¸â›¹ðŸ½â›¹ðŸ½â€â™‚ï¸ðŸ‹ðŸ½â€â™€ï¸ðŸ‹ðŸ½ðŸ‹ðŸ½â€â™‚ï¸ðŸš´ðŸ½â€â™€ï¸ðŸš´ðŸ½ðŸš´ðŸ½â€â™‚ï¸ðŸšµðŸ½â€â™€ï¸ðŸšµðŸ½ðŸšµðŸ½â€â™‚ï¸ðŸ¤¸ðŸ½â€â™€ï¸ðŸ¤¸ðŸ½ðŸ¤¸ðŸ½â€â™‚ï¸ðŸ¤½ðŸ½â€â™€ï¸ðŸ¤½ðŸ½ðŸ¤½ðŸ½â€â™‚ï¸ðŸ¤¾ðŸ½â€â™€ï¸ðŸ¤¾ðŸ½ðŸ¤¾ðŸ½â€â™‚ï¸ðŸ¤¹ðŸ½â€â™€ï¸ðŸ¤¹ðŸ½ðŸ¤¹ðŸ½â€â™‚ï¸ðŸ§˜ðŸ½â€â™€ï¸ðŸ§˜ðŸ½ðŸ§˜ðŸ½â€â™‚ï¸ðŸ›€ðŸ½ðŸ›ŒðŸ½',
            'Dark brown emojis': 'ðŸ‘‹ðŸ¾ðŸ¤šðŸ¾ðŸ–ðŸ¾âœ‹ðŸ¾ðŸ––ðŸ¾ðŸ‘ŒðŸ¾ðŸ¤ŒðŸ¾ðŸ¤ðŸ¾âœŒðŸ¾ðŸ¤žðŸ¾ðŸ«°ðŸ¾ðŸ¤ŸðŸ¾ðŸ¤˜ðŸ¾ðŸ¤™ðŸ¾ðŸ«µðŸ¾ðŸ«±ðŸ¾ðŸ«²ðŸ¾ðŸ«¸ðŸ¾ðŸ«·ðŸ¾ðŸ«³ðŸ¾ðŸ«´ðŸ¾ðŸ‘ˆðŸ¾ðŸ‘‰ðŸ¾ðŸ‘†ðŸ¾ðŸ–•ðŸ¾ðŸ‘‡ðŸ¾â˜ðŸ¾ðŸ‘ðŸ¾ðŸ‘ŽðŸ¾âœŠðŸ¾ðŸ‘ŠðŸ¾ðŸ¤›ðŸ¾ðŸ¤œðŸ¾ðŸ‘ðŸ¾ðŸ«¶ðŸ¾ðŸ™ŒðŸ¾ðŸ‘ðŸ¾ðŸ¤²ðŸ¾ðŸ™ðŸ¾âœðŸ¾ðŸ’…ðŸ¾ðŸ¤³ðŸ¾ðŸ’ªðŸ¾ðŸ¦µðŸ¾ðŸ¦¶ðŸ¾ðŸ‘‚ðŸ¾ðŸ¦»ðŸ¾ðŸ‘ƒðŸ¾ðŸ‘¶ðŸ¾ðŸ‘§ðŸ¾ðŸ§’ðŸ¾ðŸ‘¦ðŸ¾ðŸ‘©ðŸ¾ðŸ§‘ðŸ¾ðŸ‘¨ðŸ¾ðŸ‘©ðŸ¾â€ðŸ¦±ðŸ§‘ðŸ¾â€ðŸ¦±ðŸ‘¨ðŸ¾â€ðŸ¦±ðŸ‘©ðŸ¾â€ðŸ¦°ðŸ§‘ðŸ¾â€ðŸ¦°ðŸ‘¨ðŸ¾â€ðŸ¦°ðŸ‘±ðŸ¾â€â™€ï¸ðŸ‘±ðŸ¾ðŸ‘±ðŸ¾â€â™‚ï¸ðŸ‘©ðŸ¾â€ðŸ¦³ðŸ§‘ðŸ¾â€ðŸ¦³ðŸ‘¨ðŸ¾â€ðŸ¦³ðŸ‘©ðŸ¾â€ðŸ¦²ðŸ§‘ðŸ¾â€ðŸ¦²ðŸ‘¨ðŸ¾â€ðŸ¦²ðŸ§”ðŸ¾â€â™€ï¸ðŸ§”ðŸ¾ðŸ§”ðŸ¾â€â™‚ï¸ðŸ‘µðŸ¾ðŸ§“ðŸ¾ðŸ‘´ðŸ¾ðŸ‘²ðŸ¾ðŸ‘³ðŸ¾â€â™€ï¸ðŸ‘³ðŸ¾ðŸ‘³ðŸ¾â€â™‚ï¸ðŸ§•ðŸ¾ðŸ‘®ðŸ¾â€â™€ï¸ðŸ‘®ðŸ¾ðŸ‘®ðŸ¾â€â™‚ï¸ðŸ‘·ðŸ¾â€â™€ï¸ðŸ‘·ðŸ¾ðŸ‘·ðŸ¾â€â™‚ï¸ðŸ’‚ðŸ¾â€â™€ï¸ðŸ’‚ðŸ¾ðŸ’‚ðŸ¾â€â™‚ï¸ðŸ•µðŸ¾â€â™€ï¸ðŸ•µðŸ¾ðŸ•µðŸ¾â€â™‚ï¸ðŸ‘©ðŸ¾â€âš•ï¸ðŸ§‘ðŸ¾â€âš•ï¸ðŸ‘¨ðŸ¾â€âš•ï¸ðŸ‘©ðŸ¾â€ðŸŒ¾ðŸ§‘ðŸ¾â€ðŸŒ¾ðŸ‘¨ðŸ¾â€ðŸŒ¾ðŸ‘©ðŸ¾â€ðŸ³ðŸ§‘ðŸ¾â€ðŸ³ðŸ‘¨ðŸ¾â€ðŸ³ðŸ‘©ðŸ¾â€ðŸŽ“ðŸ§‘ðŸ¾â€ðŸŽ“ðŸ‘¨ðŸ¾â€ðŸŽ“ðŸ‘©ðŸ¾â€ðŸŽ¤ðŸ§‘ðŸ¾â€ðŸŽ¤ðŸ‘¨ðŸ¾â€ðŸŽ¤ðŸ‘©ðŸ¾â€ðŸ«ðŸ§‘ðŸ¾â€ðŸ«ðŸ‘¨ðŸ¾â€ðŸ«ðŸ‘©ðŸ¾â€ðŸ­ðŸ§‘ðŸ¾â€ðŸ­ðŸ‘¨ðŸ¾â€ðŸ­ðŸ‘©ðŸ¾â€ðŸ’»ðŸ§‘ðŸ¾â€ðŸ’»ðŸ‘¨ðŸ¾â€ðŸ’»ðŸ‘©ðŸ¾â€ðŸ’¼ðŸ§‘ðŸ¾â€ðŸ’¼ðŸ‘¨ðŸ¾â€ðŸ’¼ðŸ‘©ðŸ¾â€ðŸ”§ðŸ§‘ðŸ¾â€ðŸ”§ðŸ‘¨ðŸ¾â€ðŸ”§ðŸ‘©ðŸ¾â€ðŸ”¬ðŸ§‘ðŸ¾â€ðŸ”¬ðŸ‘¨ðŸ¾â€ðŸ”¬ðŸ‘©ðŸ¾â€ðŸŽ¨ðŸ§‘ðŸ¾â€ðŸŽ¨ðŸ‘¨ðŸ¾â€ðŸŽ¨ðŸ‘©ðŸ¾â€ðŸš’ðŸ§‘ðŸ¾â€ðŸš’ðŸ‘¨ðŸ¾â€ðŸš’ðŸ‘©ðŸ¾â€âœˆï¸ðŸ§‘ðŸ¾â€âœˆï¸ðŸ‘¨ðŸ¾â€âœˆï¸ðŸ‘©ðŸ¾â€ðŸš€ðŸ§‘ðŸ¾â€ðŸš€ðŸ‘¨ðŸ¾â€ðŸš€ðŸ‘©ðŸ¾â€âš–ï¸ðŸ§‘ðŸ¾â€âš–ï¸ðŸ‘¨ðŸ¾â€âš–ï¸ðŸ‘°ðŸ¾â€â™€ï¸ðŸ‘°ðŸ¾ðŸ‘°ðŸ¾â€â™‚ï¸ðŸ¤µðŸ¾â€â™€ï¸ðŸ¤µðŸ¾ðŸ¤µðŸ¾â€â™‚ï¸ðŸ‘¸ðŸ¾ðŸ«…ðŸ¾ðŸ¤´ðŸ¾ðŸ¥·ðŸ¾ðŸ¦¸ðŸ¾â€â™€ï¸ðŸ¦¸ðŸ¾ðŸ¦¸ðŸ¾â€â™‚ï¸ðŸ¦¹ðŸ¾â€â™€ï¸ðŸ¦¹ðŸ¾ðŸ¦¹ðŸ¾â€â™‚ï¸ðŸ¤¶ðŸ¾ðŸ§‘ðŸ¾â€ðŸŽ„ðŸŽ…ðŸ¾ðŸ§™ðŸ¾â€â™€ï¸ðŸ§™ðŸ¾ðŸ§™ðŸ¾â€â™‚ï¸ðŸ§ðŸ¾â€â™€ï¸ðŸ§ðŸ¾ðŸ§ðŸ¾â€â™‚ï¸ðŸ§›ðŸ¾â€â™€ï¸ðŸ§›ðŸ¾ðŸ§›ðŸ¾â€â™‚ï¸ðŸ§œðŸ¾â€â™€ï¸ðŸ§œðŸ¾ðŸ§œðŸ¾â€â™‚ï¸ðŸ§šðŸ¾â€â™€ï¸ðŸ§šðŸ¾ðŸ§šðŸ¾â€â™‚ï¸ðŸ‘¼ðŸ¾ðŸ¤°ðŸ¾ðŸ«„ðŸ¾ðŸ«ƒðŸ¾ðŸ¤±ðŸ¾ðŸ‘©ðŸ¾â€ðŸ¼ðŸ§‘ðŸ¾â€ðŸ¼ðŸ‘¨ðŸ¾â€ðŸ¼ðŸ™‡ðŸ¾â€â™€ï¸ðŸ™‡ðŸ¾ðŸ™‡ðŸ¾â€â™‚ï¸ðŸ’ðŸ¾â€â™€ï¸ðŸ’ðŸ¾ðŸ’ðŸ¾â€â™‚ï¸ðŸ™…ðŸ¾â€â™€ï¸ðŸ™…ðŸ¾ðŸ™…ðŸ¾â€â™‚ï¸ðŸ™†ðŸ¾â€â™€ï¸ðŸ™†ðŸ¾ðŸ™†ðŸ¾â€â™‚ï¸ðŸ™‹ðŸ¾â€â™€ï¸ðŸ™‹ðŸ¾ðŸ™‹ðŸ¾â€â™‚ï¸ðŸ§ðŸ¾â€â™€ï¸ðŸ§ðŸ¾ðŸ§ðŸ¾â€â™‚ï¸ðŸ¤¦ðŸ¾â€â™€ï¸ðŸ¤¦ðŸ¾ðŸ¤¦ðŸ¾â€â™‚ï¸ðŸ¤·ðŸ¾â€â™€ï¸ðŸ¤·ðŸ¾ðŸ¤·ðŸ¾â€â™‚ï¸ðŸ™ŽðŸ¾â€â™€ï¸ðŸ™ŽðŸ¾ðŸ™ŽðŸ¾â€â™‚ï¸ðŸ™ðŸ¾â€â™€ï¸ðŸ™ðŸ¾ðŸ™ðŸ¾â€â™‚ï¸ðŸ’‡ðŸ¾â€â™€ï¸ðŸ’‡ðŸ¾ðŸ’‡ðŸ¾â€â™‚ï¸ðŸ’†ðŸ¾â€â™€ï¸ðŸ’†ðŸ¾ðŸ’†ðŸ¾â€â™‚ï¸ðŸ§–ðŸ¾â€â™€ï¸ðŸ§–ðŸ¾ðŸ§–ðŸ¾â€â™‚ï¸ðŸ’ƒðŸ¾ðŸ•ºðŸ¾ðŸ•´ðŸ¿ðŸ‘©ðŸ¾â€ðŸ¦½ðŸ§‘ðŸ¾â€ðŸ¦½ðŸ‘¨ðŸ¾â€ðŸ¦½ðŸ‘©ðŸ¾â€ðŸ¦¼ðŸ§‘ðŸ¾â€ðŸ¦¼ðŸ‘¨ðŸ¾â€ðŸ¦¼ðŸš¶ðŸ¾â€â™€ï¸ðŸš¶ðŸ¾ðŸš¶ðŸ¾â€â™‚ï¸ðŸ‘©ðŸ¾â€ðŸ¦¯ðŸ§‘ðŸ¾â€ðŸ¦¯ðŸ‘¨ðŸ¾â€ðŸ¦¯ðŸ§ŽðŸ¾â€â™€ï¸ðŸ§ŽðŸ¾ðŸ§ŽðŸ¾â€â™‚ï¸ðŸƒðŸ¾â€â™€ï¸ðŸƒðŸ¾ðŸƒðŸ¾â€â™‚ï¸ðŸ§ðŸ¾â€â™€ï¸ðŸ§ðŸ¾ðŸ§ðŸ¾â€â™‚ï¸ðŸ‘­ðŸ¾ðŸ§‘ðŸ¾â€ðŸ¤â€ðŸ§‘ðŸ¾ðŸ‘¬ðŸ¾ðŸ‘«ðŸ¾ðŸ§—ðŸ¾â€â™€ï¸ðŸ§—ðŸ¾ðŸ§—ðŸ¾â€â™‚ï¸ðŸ‡ðŸ¾ðŸ‚ðŸ¾ðŸŒðŸ¾â€â™€ï¸ðŸŒðŸ¾ðŸŒðŸ¾â€â™‚ï¸ðŸ„ðŸ¾â€â™€ï¸ðŸ„ðŸ¾ðŸ„ðŸ¾â€â™‚ï¸ðŸš£ðŸ¾â€â™€ï¸ðŸš£ðŸ¾ðŸš£ðŸ¾â€â™‚ï¸ðŸŠðŸ¾â€â™€ï¸ðŸŠðŸ¾ðŸŠðŸ¾â€â™‚ï¸â›¹ðŸ¾â€â™€ï¸â›¹ðŸ¾â›¹ðŸ¾â€â™‚ï¸ðŸ‹ðŸ¾â€â™€ï¸ðŸ‹ðŸ¾ðŸ‹ðŸ¾â€â™‚ï¸ðŸš´ðŸ¾â€â™€ï¸ðŸš´ðŸ¾ðŸš´ðŸ¾â€â™‚ï¸ðŸšµðŸ¾â€â™€ï¸ðŸšµðŸ¾ðŸšµðŸ¾â€â™‚ï¸ðŸ¤¸ðŸ¾â€â™€ï¸ðŸ¤¸ðŸ¾ðŸ¤¸ðŸ¾â€â™‚ï¸ðŸ¤½ðŸ¾â€â™€ï¸ðŸ¤½ðŸ¾ðŸ¤½ðŸ¾â€â™‚ï¸ðŸ¤¾ðŸ¾â€â™€ï¸ðŸ¤¾ðŸ¾ðŸ¤¾ðŸ¾â€â™‚ï¸ðŸ¤¹ðŸ¾â€â™€ï¸ðŸ¤¹ðŸ¾ðŸ¤¹ðŸ¾â€â™‚ï¸ðŸ§˜ðŸ¾â€â™€ï¸ðŸ§˜ðŸ¾ðŸ§˜ðŸ¾â€â™‚ï¸ðŸ›€ðŸ¾ðŸ›ŒðŸ¾',
            'Black emojis': 'ðŸ‘‹ðŸ¿ðŸ¤šðŸ¿ðŸ–ðŸ¿âœ‹ðŸ¿ðŸ––ðŸ¿ðŸ‘ŒðŸ¿ðŸ¤ŒðŸ¿ðŸ¤ðŸ¿âœŒðŸ¿ðŸ¤žðŸ¿ðŸ«°ðŸ¿ðŸ¤ŸðŸ¿ðŸ¤˜ðŸ¿ðŸ¤™ðŸ¿ðŸ«µðŸ¿ðŸ«±ðŸ¿ðŸ«²ðŸ¿ðŸ«¸ðŸ¿ðŸ«·ðŸ¿ðŸ«³ðŸ¿ðŸ«´ðŸ¿ðŸ‘ˆðŸ¿ðŸ‘‰ðŸ¿ðŸ‘†ðŸ¿ðŸ–•ðŸ¿ðŸ‘‡ðŸ¿â˜ðŸ¿ðŸ‘ðŸ¿ðŸ‘ŽðŸ¿âœŠðŸ¿ðŸ‘ŠðŸ¿ðŸ¤›ðŸ¿ðŸ¤œðŸ¿ðŸ‘ðŸ¿ðŸ«¶ðŸ¿ðŸ™ŒðŸ¿ðŸ‘ðŸ¿ðŸ¤²ðŸ¿ðŸ™ðŸ¿âœðŸ¿ðŸ’…ðŸ¿ðŸ¤³ðŸ¿ðŸ’ªðŸ¿ðŸ¦µðŸ¿ðŸ¦¶ðŸ¿ðŸ‘‚ðŸ¿ðŸ¦»ðŸ¿ðŸ‘ƒðŸ¿ðŸ‘¶ðŸ¿ðŸ‘§ðŸ¿ðŸ§’ðŸ¿ðŸ‘¦ðŸ¿ðŸ‘©ðŸ¿ðŸ§‘ðŸ¿ðŸ‘¨ðŸ¿ðŸ‘©ðŸ¿â€ðŸ¦±ðŸ§‘ðŸ¿â€ðŸ¦±ðŸ‘¨ðŸ¿â€ðŸ¦±ðŸ‘©ðŸ¿â€ðŸ¦°ðŸ§‘ðŸ¿â€ðŸ¦°ðŸ‘¨ðŸ¿â€ðŸ¦°ðŸ‘±ðŸ¿â€â™€ï¸ðŸ‘±ðŸ¿ðŸ‘±ðŸ¿â€â™‚ï¸ðŸ‘©ðŸ¿â€ðŸ¦³ðŸ§‘ðŸ¿â€ðŸ¦³ðŸ‘¨ðŸ¿â€ðŸ¦³ðŸ‘©ðŸ¿â€ðŸ¦²ðŸ§‘ðŸ¿â€ðŸ¦²ðŸ‘¨ðŸ¿â€ðŸ¦²ðŸ§”ðŸ¿â€â™€ï¸ðŸ§”ðŸ¿ðŸ§”ðŸ¿â€â™‚ï¸ðŸ‘µðŸ¿ðŸ§“ðŸ¿ðŸ‘´ðŸ¿ðŸ‘²ðŸ¿ðŸ‘³ðŸ¿â€â™€ï¸ðŸ‘³ðŸ¿ðŸ‘³ðŸ¿â€â™‚ï¸ðŸ§•ðŸ¿ðŸ‘®ðŸ¿â€â™€ï¸ðŸ‘®ðŸ¿ðŸ‘®ðŸ¿â€â™‚ï¸ðŸ‘·ðŸ¿â€â™€ï¸ðŸ‘·ðŸ¿ðŸ‘·ðŸ¿â€â™‚ï¸ðŸ’‚ðŸ¿â€â™€ï¸ðŸ’‚ðŸ¿ðŸ’‚ðŸ¿â€â™‚ï¸ðŸ•µðŸ¿â€â™€ï¸ðŸ•µðŸ¿ðŸ•µðŸ¿â€â™‚ï¸ðŸ‘©ðŸ¿â€âš•ï¸ðŸ§‘ðŸ¿â€âš•ï¸ðŸ‘¨ðŸ¿â€âš•ï¸ðŸ‘©ðŸ¿â€ðŸŒ¾ðŸ§‘ðŸ¿â€ðŸŒ¾ðŸ‘¨ðŸ¿â€ðŸŒ¾ðŸ‘©ðŸ¿â€ðŸ³ðŸ§‘ðŸ¿â€ðŸ³ðŸ‘¨ðŸ¿â€ðŸ³ðŸ‘©ðŸ¿â€ðŸŽ“ðŸ§‘ðŸ¿â€ðŸŽ“ðŸ‘¨ðŸ¿â€ðŸŽ“ðŸ‘©ðŸ¿â€ðŸŽ¤ðŸ§‘ðŸ¿â€ðŸŽ¤ðŸ‘¨ðŸ¿â€ðŸŽ¤ðŸ‘©ðŸ¿â€ðŸ«ðŸ§‘ðŸ¿â€ðŸ«ðŸ‘¨ðŸ¿â€ðŸ«ðŸ‘©ðŸ¿â€ðŸ­ðŸ§‘ðŸ¿â€ðŸ­ðŸ‘¨ðŸ¿â€ðŸ­ðŸ‘©ðŸ¿â€ðŸ’»ðŸ§‘ðŸ¿â€ðŸ’»ðŸ‘¨ðŸ¿â€ðŸ’»ðŸ‘©ðŸ¿â€ðŸ’¼ðŸ§‘ðŸ¿â€ðŸ’¼ðŸ‘¨ðŸ¿â€ðŸ’¼ðŸ‘©ðŸ¿â€ðŸ”§ðŸ§‘ðŸ¿â€ðŸ”§ðŸ‘¨ðŸ¿â€ðŸ”§ðŸ‘©ðŸ¿â€ðŸ”¬ðŸ§‘ðŸ¿â€ðŸ”¬ðŸ‘¨ðŸ¿â€ðŸ”¬ðŸ‘©ðŸ¿â€ðŸŽ¨ðŸ§‘ðŸ¿â€ðŸŽ¨ðŸ‘¨ðŸ¿â€ðŸŽ¨ðŸ‘©ðŸ¿â€ðŸš’ðŸ§‘ðŸ¿â€ðŸš’ðŸ‘¨ðŸ¿â€ðŸš’ðŸ‘©ðŸ¿â€âœˆï¸ðŸ§‘ðŸ¿â€âœˆï¸ðŸ‘¨ðŸ¿â€âœˆï¸ðŸ‘©ðŸ¿â€ðŸš€ðŸ§‘ðŸ¿â€ðŸš€ðŸ‘¨ðŸ¿â€ðŸš€ðŸ‘©ðŸ¿â€âš–ï¸ðŸ§‘ðŸ¿â€âš–ï¸ðŸ‘¨ðŸ¿â€âš–ï¸ðŸ‘°ðŸ¿â€â™€ï¸ðŸ‘°ðŸ¿ðŸ‘°ðŸ¿â€â™‚ï¸ðŸ¤µðŸ¿â€â™€ï¸ðŸ¤µðŸ¿ðŸ¤µðŸ¿â€â™‚ï¸ðŸ‘¸ðŸ¿ðŸ«…ðŸ¿ðŸ¤´ðŸ¿ðŸ¥·ðŸ¿ðŸ¦¸ðŸ¿â€â™€ï¸ðŸ¦¸ðŸ¿ðŸ¦¸ðŸ¿â€â™‚ï¸ðŸ¦¹ðŸ¿â€â™€ï¸ðŸ¦¹ðŸ¿ðŸ¦¹ðŸ¿â€â™‚ï¸ðŸ¤¶ðŸ¿ðŸ§‘ðŸ¿â€ðŸŽ„ðŸŽ…ðŸ¿ðŸ§™ðŸ¿â€â™€ï¸ðŸ§™ðŸ¿ðŸ§™ðŸ¿â€â™‚ï¸ðŸ§ðŸ¿â€â™€ï¸ðŸ§ðŸ¿ðŸ§ðŸ¿â€â™‚ï¸ðŸ§›ðŸ¿â€â™€ï¸ðŸ§›ðŸ¿ðŸ§›ðŸ¿â€â™‚ï¸ðŸ§œðŸ¿â€â™€ï¸ðŸ§œðŸ¿ðŸ§œðŸ¿â€â™‚ï¸ðŸ§šðŸ¿â€â™€ï¸ðŸ§šðŸ¿ðŸ§šðŸ¿â€â™‚ï¸ðŸ‘¼ðŸ¿ðŸ¤°ðŸ¿ðŸ«„ðŸ¿ðŸ«ƒðŸ¿ðŸ¤±ðŸ¿ðŸ‘©ðŸ¿â€ðŸ¼ðŸ§‘ðŸ¿â€ðŸ¼ðŸ‘¨ðŸ¿â€ðŸ¼ðŸ™‡ðŸ¿â€â™€ï¸ðŸ™‡ðŸ¿ðŸ™‡ðŸ¿â€â™‚ï¸ðŸ’ðŸ¿â€â™€ï¸ðŸ’ðŸ¿ðŸ’ðŸ¿â€â™‚ï¸ðŸ™…ðŸ¿â€â™€ï¸ðŸ™…ðŸ¿ðŸ™…ðŸ¿â€â™‚ï¸ðŸ™†ðŸ¿â€â™€ï¸ðŸ™†ðŸ¿ðŸ™†ðŸ¿â€â™‚ï¸ðŸ™‹ðŸ¿â€â™€ï¸ðŸ™‹ðŸ¿ðŸ™‹ðŸ¿â€â™‚ï¸ðŸ§ðŸ¿â€â™€ï¸ðŸ§ðŸ¿ðŸ§ðŸ¿â€â™‚ï¸ðŸ¤¦ðŸ¿â€â™€ï¸ðŸ¤¦ðŸ¿ðŸ¤¦ðŸ¿â€â™‚ï¸ðŸ¤·ðŸ¿â€â™€ï¸ðŸ¤·ðŸ¿ðŸ¤·ðŸ¿â€â™‚ï¸ðŸ™ŽðŸ¿â€â™€ï¸ðŸ™ŽðŸ¿ðŸ™ŽðŸ¿â€â™‚ï¸ðŸ™ðŸ¿â€â™€ï¸ðŸ™ðŸ¿ðŸ™ðŸ¿â€â™‚ï¸ðŸ’‡ðŸ¿â€â™€ï¸ðŸ’‡ðŸ¿ðŸ’‡ðŸ¿â€â™‚ï¸ðŸ’†ðŸ¿â€â™€ï¸ðŸ’†ðŸ¿ðŸ’†ðŸ¿â€â™‚ï¸ðŸ§–ðŸ¿â€â™€ï¸ðŸ§–ðŸ¿ðŸ§–ðŸ¿â€â™‚ï¸ðŸ’ƒðŸ¿ðŸ•ºðŸ¿ðŸ•´ðŸ¿ðŸ‘©ðŸ¿â€ðŸ¦½ðŸ§‘ðŸ¿â€ðŸ¦½ðŸ‘¨ðŸ¿â€ðŸ¦½ðŸ‘©ðŸ¿â€ðŸ¦¼ðŸ§‘ðŸ¿â€ðŸ¦¼ðŸ‘¨ðŸ¿â€ðŸ¦¼ðŸš¶ðŸ¿â€â™€ï¸ðŸš¶ðŸ¿ðŸš¶ðŸ¿â€â™‚ï¸ðŸ‘©ðŸ¿â€ðŸ¦¯ðŸ§‘ðŸ¿â€ðŸ¦¯ðŸ‘¨ðŸ¿â€ðŸ¦¯ðŸ§ŽðŸ¿â€â™€ï¸ðŸ§ŽðŸ¿ðŸ§ŽðŸ¿â€â™‚ï¸ðŸƒðŸ¿â€â™€ï¸ðŸƒðŸ¿ðŸƒðŸ¿â€â™‚ï¸ðŸ§ðŸ¿â€â™€ï¸ðŸ§ðŸ¿ðŸ§ðŸ¿â€â™‚ï¸ðŸ‘­ðŸ¿ðŸ§‘ðŸ¿â€ðŸ¤â€ðŸ§‘ðŸ¿ðŸ‘¬ðŸ¿ðŸ‘«ðŸ¿ðŸ§—ðŸ¿â€â™€ï¸ðŸ§—ðŸ¿ðŸ§—ðŸ¿â€â™‚ï¸ðŸ‡ðŸ¿ðŸ‚ðŸ¿ðŸŒðŸ¿â€â™€ï¸ðŸŒðŸ¿ðŸŒðŸ¿â€â™‚ï¸ðŸ„ðŸ¿â€â™€ï¸ðŸ„ðŸ¿ðŸ„ðŸ¿â€â™‚ï¸ðŸš£ðŸ¿â€â™€ï¸ðŸš£ðŸ¿ðŸš£ðŸ¿â€â™‚ï¸ðŸŠðŸ¿â€â™€ï¸ðŸŠðŸ¿ðŸŠðŸ¿â€â™‚ï¸â›¹ðŸ¿â€â™€ï¸â›¹ðŸ¿â›¹ðŸ¿â€â™‚ï¸ðŸ‹ðŸ¿â€â™€ï¸ðŸ‹ðŸ¿ðŸ‹ðŸ¿â€â™‚ï¸ðŸš´ðŸ¿â€â™€ï¸ðŸš´ðŸ¿ðŸš´ðŸ¿â€â™‚ï¸ðŸšµðŸ¿â€â™€ï¸ðŸšµðŸ¿ðŸšµðŸ¿â€â™‚ï¸ðŸ¤¸ðŸ¿â€â™€ï¸ðŸ¤¸ðŸ¿ðŸ¤¸ðŸ¿â€â™‚ï¸ðŸ¤½ðŸ¿â€â™€ï¸ðŸ¤½ðŸ¿ðŸ¤½ðŸ¿â€â™‚ï¸ðŸ¤¾ðŸ¿â€â™€ï¸ðŸ¤¾ðŸ¿ðŸ¤¾ðŸ¿â€â™‚ï¸ðŸ¤¹ðŸ¿â€â™€ï¸ðŸ¤¹ðŸ¿ðŸ¤¹ðŸ¿â€â™‚ï¸ðŸ§˜ðŸ¿â€â™€ï¸ðŸ§˜ðŸ¿ðŸ§˜ðŸ¿â€â™‚ï¸ðŸ›€ðŸ¿ðŸ›ŒðŸ¿',
            'Animals and nature': 'ðŸ¶ðŸ±ðŸ­ðŸ¹ðŸ°ðŸ¦ŠðŸ»ðŸ¼ðŸ»â€â„ï¸ðŸ¨ðŸ¯ðŸ¦ðŸ®ðŸ·ðŸ½ðŸ¸ðŸµðŸ™ˆðŸ™‰ðŸ™ŠðŸ’ðŸ”ðŸ§ðŸ¦ðŸ¦â€â¬›ðŸ¤ðŸ£ðŸ¥ðŸ¦†ðŸ¦…ðŸ¦‰ðŸ¦‡ðŸºðŸ—ðŸ´ðŸ¦„ðŸðŸª±ðŸ›ðŸ¦‹ðŸŒðŸžðŸœðŸª°ðŸª²ðŸª³ðŸ¦ŸðŸ¦—ðŸ•·ðŸ•¸ðŸ¦‚ðŸ¢ðŸðŸ¦ŽðŸ¦–ðŸ¦•ðŸ™ðŸ¦‘ðŸ¦ðŸ¦žðŸ¦€ðŸª¼ðŸª¸ðŸ¡ðŸ ðŸŸðŸ¬ðŸ³ðŸ‹ðŸ¦ˆðŸŠðŸ…ðŸ†ðŸ¦“ðŸ«ðŸ¦ðŸ¦§ðŸ¦£ðŸ˜ðŸ¦›ðŸ¦ðŸªðŸ«ðŸ¦’ðŸ¦˜ðŸ¦¬ðŸƒðŸ‚ðŸ„ðŸŽðŸ–ðŸðŸ‘ðŸ¦™ðŸðŸ¦ŒðŸ«ŽðŸ•ðŸ©ðŸ¦®ðŸ•â€ðŸ¦ºðŸˆðŸˆâ€â¬›ðŸª½ðŸª¶ðŸ“ðŸ¦ƒðŸ¦¤ðŸ¦šðŸ¦œðŸ¦¢ðŸª¿ðŸ¦©ðŸ•ŠðŸ‡ðŸ¦ðŸ¦¨ðŸ¦¡ðŸ¦«ðŸ¦¦ðŸ¦¥ðŸðŸ€ðŸ¿ðŸ¦”ðŸ¾ðŸ‰ðŸ²ðŸŒµðŸŽ„ðŸŒ²ðŸŒ³ðŸŒ´ðŸª¹ðŸªºðŸªµðŸŒ±ðŸŒ¿â˜˜ï¸ðŸ€ðŸŽðŸª´ðŸŽ‹ðŸƒðŸ‚ðŸðŸ„ðŸšðŸª¨ðŸŒ¾ðŸ’ðŸŒ·ðŸª·ðŸŒ¹ðŸ¥€ðŸŒºðŸŒ¸ðŸª»ðŸŒ¼ðŸŒ»ðŸŒžðŸŒðŸŒ›ðŸŒœðŸŒšðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ™ðŸŒŽðŸŒðŸŒðŸªðŸ’«â­ï¸ðŸŒŸâœ¨âš¡ï¸â˜„ï¸ðŸ’¥ðŸ”¥ðŸŒªðŸŒˆâ˜€ï¸ðŸŒ¤â›…ï¸ðŸŒ¥â˜ï¸ðŸŒ¦ðŸŒ§â›ˆðŸŒ©ðŸŒ¨â„ï¸â˜ƒï¸â›„ï¸ðŸŒ¬ðŸ’¨ðŸ’§ðŸ’¦ðŸ«§â˜”ï¸â˜‚ï¸ðŸŒŠðŸŒ«',
            'Food and drink': 'ðŸðŸŽðŸðŸŠðŸ‹ðŸŒðŸ‰ðŸ‡ðŸ“ðŸ«ðŸˆðŸ’ðŸ‘ðŸ¥­ðŸðŸ¥¥ðŸ¥ðŸ…ðŸ†ðŸ¥‘ðŸ¥¦ðŸ«›ðŸ¥¬ðŸ¥’ðŸŒ¶ðŸ«‘ðŸŒ½ðŸ¥•ðŸ«’ðŸ§„ðŸ§…ðŸ«šðŸ¥”ðŸ ðŸ«˜ðŸ¥ðŸ¥¯ðŸžðŸ¥–ðŸ¥¨ðŸ§€ðŸ¥šðŸ³ðŸ§ˆðŸ¥žðŸ§‡ðŸ¥“ðŸ¥©ðŸ—ðŸ–ðŸ¦´ðŸŒ­ðŸ”ðŸŸðŸ•ðŸ«“ðŸ¥ªðŸ¥™ðŸ§†ðŸŒ®ðŸŒ¯ðŸ«”ðŸ¥—ðŸ¥˜ðŸ«•ðŸ¥«ðŸðŸœðŸ²ðŸ›ðŸ£ðŸ±ðŸ¥ŸðŸ¦ªðŸ¤ðŸ™ðŸšðŸ˜ðŸ¥ðŸ¥ ðŸ¥®ðŸ¢ðŸ¡ðŸ§ðŸ¨ðŸ¦ðŸ¥§ðŸ§ðŸ°ðŸŽ‚ðŸ®ðŸ­ðŸ¬ðŸ«ðŸ¿ðŸ©ðŸªðŸŒ°ðŸ¥œðŸ¯ðŸ¥›ðŸ¼ðŸ«–â˜•ï¸ðŸµðŸ§ƒðŸ¥¤ðŸ§‹ðŸ«™ðŸ¶ðŸºðŸ»ðŸ¥‚ðŸ·ðŸ«—ðŸ¥ƒðŸ¸ðŸ¹ðŸ§‰ðŸ¾ðŸ§ŠðŸ¥„ðŸ´ðŸ½ðŸ¥£ðŸ¥¡ðŸ¥¢ðŸ§‚',
            'Activity and sports': 'âš½ï¸ðŸ€ðŸˆâš¾ï¸ðŸ¥ŽðŸŽ¾ðŸðŸ‰ðŸ¥ðŸŽ±ðŸª€ðŸ“ðŸ¸ðŸ’ðŸ‘ðŸ¥ðŸðŸªƒðŸ¥…â›³ï¸ðŸªðŸ¹ðŸŽ£ðŸ¤¿ðŸ¥ŠðŸ¥‹ðŸŽ½ðŸ›¹ðŸ›¼ðŸ›·â›¸ðŸ¥ŒðŸŽ¿â›·ðŸ‚ðŸª‚ðŸ‹ï¸â€â™€ï¸ðŸ‹ï¸ðŸ‹ï¸â€â™‚ï¸ðŸ¤¼â€â™€ï¸ðŸ¤¼ðŸ¤¼â€â™‚ï¸ðŸ¤¸â€â™€ï¸ðŸ¤¸ðŸ¤¸â€â™‚ï¸â›¹ï¸â€â™€ï¸â›¹ï¸â›¹ï¸â€â™‚ï¸ðŸ¤ºðŸ¤¾â€â™€ï¸ðŸ¤¾ðŸ¤¾â€â™‚ï¸ðŸŒï¸â€â™€ï¸ðŸŒï¸ðŸŒï¸â€â™‚ï¸ðŸ‡ðŸ§˜â€â™€ï¸ðŸ§˜ðŸ§˜â€â™‚ï¸ðŸ„â€â™€ï¸ðŸ„ðŸ„â€â™‚ï¸ðŸŠâ€â™€ï¸ðŸŠðŸŠâ€â™‚ï¸ðŸ¤½â€â™€ï¸ðŸ¤½ðŸ¤½â€â™‚ï¸ðŸš£â€â™€ï¸ðŸš£ðŸš£â€â™‚ï¸ðŸ§—â€â™€ï¸ðŸ§—ðŸ§—â€â™‚ï¸ðŸšµâ€â™€ï¸ðŸšµðŸšµâ€â™‚ï¸ðŸš´â€â™€ï¸ðŸš´ðŸš´â€â™‚ï¸ðŸ†ðŸ¥‡ðŸ¥ˆðŸ¥‰ðŸ…ðŸŽ–ðŸµðŸŽ—ðŸŽ«ðŸŽŸðŸŽªðŸ¤¹ðŸ¤¹â€â™‚ï¸ðŸ¤¹â€â™€ï¸ðŸŽ­ðŸ©°ðŸŽ¨ðŸŽ¬ðŸŽ¤ðŸŽ§ðŸŽ¼ðŸŽ¹ðŸ¥ðŸª˜ðŸª‡ðŸŽ·ðŸŽºðŸª—ðŸŽ¸ðŸª•ðŸŽ»ðŸªˆðŸŽ²â™ŸðŸŽ¯ðŸŽ³ðŸŽ®ðŸŽ°ðŸ§©',
            'Travel and places': 'ðŸš—ðŸš•ðŸš™ðŸšŒðŸšŽðŸŽðŸš“ðŸš‘ðŸš’ðŸšðŸ›»ðŸššðŸš›ðŸšœðŸ¦¯ðŸ¦½ðŸ¦¼ðŸ›´ðŸš²ðŸ›µðŸðŸ›ºðŸš¨ðŸš”ðŸšðŸš˜ðŸš–ðŸ›žðŸš¡ðŸš ðŸšŸðŸšƒðŸš‹ðŸšžðŸšðŸš„ðŸš…ðŸšˆðŸš‚ðŸš†ðŸš‡ðŸšŠðŸš‰âœˆï¸ðŸ›«ðŸ›¬ðŸ›©ðŸ’ºðŸ›°ðŸš€ðŸ›¸ðŸšðŸ›¶â›µï¸ðŸš¤ðŸ›¥ðŸ›³â›´ðŸš¢âš“ï¸ðŸ›ŸðŸªâ›½ï¸ðŸš§ðŸš¦ðŸš¥ðŸšðŸ—ºðŸ—¿ðŸ—½ðŸ—¼ðŸ°ðŸ¯ðŸŸðŸŽ¡ðŸŽ¢ðŸ›ðŸŽ â›²ï¸â›±ðŸ–ðŸðŸœðŸŒ‹â›°ðŸ”ðŸ—»ðŸ•â›ºï¸ðŸ›–ðŸ ðŸ¡ðŸ˜ðŸšðŸ—ðŸ­ðŸ¢ðŸ¬ðŸ£ðŸ¤ðŸ¥ðŸ¦ðŸ¨ðŸªðŸ«ðŸ©ðŸ’’ðŸ›â›ªï¸ðŸ•ŒðŸ•ðŸ›•ðŸ•‹â›©ðŸ›¤ðŸ›£ðŸ—¾ðŸŽ‘ðŸžðŸŒ…ðŸŒ„ðŸŒ ðŸŽ‡ðŸŽ†ðŸŒ‡ðŸŒ†ðŸ™ðŸŒƒðŸŒŒðŸŒ‰ðŸŒ',
            'Objects': 'âŒšï¸ðŸ“±ðŸ“²ðŸ’»âŒ¨ï¸ðŸ–¥ðŸ–¨ðŸ–±ðŸ–²ðŸ•¹ðŸ—œðŸ’½ðŸ’¾ðŸ’¿ðŸ“€ðŸ“¼ðŸ“·ðŸ“¸ðŸ“¹ðŸŽ¥ðŸ“½ðŸŽžðŸ“žâ˜Žï¸ðŸ“ŸðŸ“ ðŸ“ºðŸ“»ðŸŽ™ðŸŽšðŸŽ›ðŸ§­â±â²â°ðŸ•°âŒ›ï¸â³ðŸ“¡ðŸ”‹ðŸª«ðŸ”ŒðŸ’¡ðŸ”¦ðŸ•¯ðŸª”ðŸ§¯ðŸ›¢ðŸ›ï¸ðŸ’¸ðŸ’µðŸ’´ðŸ’¶ðŸ’·ðŸª™ðŸ’°ðŸ’³ðŸ’Žâš–ï¸ðŸª®ðŸªœðŸ§°ðŸª›ðŸ”§ðŸ”¨âš’ðŸ› â›ðŸªšðŸ”©âš™ï¸ðŸª¤ðŸ§±â›“ðŸ§²ðŸ”«ðŸ’£ðŸ§¨ðŸª“ðŸ”ªðŸ—¡âš”ï¸ðŸ›¡ðŸš¬âš°ï¸ðŸª¦âš±ï¸ðŸºðŸ”®ðŸ“¿ðŸ§¿ðŸª¬ðŸ’ˆâš—ï¸ðŸ”­ðŸ”¬ðŸ•³ðŸ©¹ðŸ©ºðŸ©»ðŸ©¼ðŸ’ŠðŸ’‰ðŸ©¸ðŸ§¬ðŸ¦ ðŸ§«ðŸ§ªðŸŒ¡ðŸ§¹ðŸª ðŸ§ºðŸ§»ðŸš½ðŸš°ðŸš¿ðŸ›ðŸ›€ðŸ§¼ðŸª¥ðŸª’ðŸ§½ðŸª£ðŸ§´ðŸ›ŽðŸ”‘ðŸ—ðŸšªðŸª‘ðŸ›‹ðŸ›ðŸ›ŒðŸ§¸ðŸª†ðŸ–¼ðŸªžðŸªŸðŸ›ðŸ›’ðŸŽðŸŽˆðŸŽðŸŽ€ðŸª„ðŸª…ðŸŽŠðŸŽ‰ðŸª©ðŸŽŽðŸ®ðŸŽðŸ§§âœ‰ï¸ðŸ“©ðŸ“¨ðŸ“§ðŸ’ŒðŸ“¥ðŸ“¤ðŸ“¦ðŸ·ðŸª§ðŸ“ªðŸ“«ðŸ“¬ðŸ“­ðŸ“®ðŸ“¯ðŸ“œðŸ“ƒðŸ“„ðŸ“‘ðŸ§¾ðŸ“ŠðŸ“ˆðŸ“‰ðŸ—’ðŸ—“ðŸ“†ðŸ“…ðŸ—‘ðŸªªðŸ“‡ðŸ—ƒðŸ—³ðŸ—„ðŸ“‹ðŸ“ðŸ“‚ðŸ—‚ðŸ—žðŸ“°ðŸ““ðŸ“”ðŸ“’ðŸ“•ðŸ“—ðŸ“˜ðŸ“™ðŸ“šðŸ“–ðŸ”–ðŸ§·ðŸ”—ðŸ“ŽðŸ–‡ðŸ“ðŸ“ðŸ§®ðŸ“ŒðŸ“âœ‚ï¸ðŸ–ŠðŸ–‹âœ’ï¸ðŸ–ŒðŸ–ðŸ“âœï¸ðŸ”ðŸ”ŽðŸ”ðŸ”ðŸ”’ðŸ”“',
            'Symbols': 'â¤ï¸ðŸ©·ðŸ§¡ðŸ’›ðŸ’šðŸ’™ðŸ©µðŸ’œðŸ–¤ðŸ©¶ðŸ¤ðŸ¤Žâ¤ï¸â€ðŸ”¥â¤ï¸â€ðŸ©¹ðŸ’”â£ï¸ðŸ’•ðŸ’žðŸ’“ðŸ’—ðŸ’–ðŸ’˜ðŸ’ðŸ’Ÿâ˜®ï¸âœï¸â˜ªï¸ðŸª¯ðŸ•‰â˜¸ï¸âœ¡ï¸ðŸ”¯ðŸ•Žâ˜¯ï¸â˜¦ï¸ðŸ›â›Žâ™ˆï¸â™‰ï¸â™Šï¸â™‹ï¸â™Œï¸â™ï¸â™Žï¸â™ï¸â™ï¸â™‘ï¸â™’ï¸â™“ï¸ðŸ†”âš›ï¸ðŸ‰‘â˜¢ï¸â˜£ï¸ðŸ“´ðŸ“³ðŸˆ¶ðŸˆšï¸ðŸˆ¸ðŸˆºðŸˆ·ï¸âœ´ï¸ðŸ†šðŸ’®ðŸ‰ãŠ™ï¸ãŠ—ï¸ðŸˆ´ðŸˆµðŸˆ¹ðŸˆ²ðŸ…°ï¸ðŸ…±ï¸ðŸ†ŽðŸ†‘ðŸ…¾ï¸ðŸ†˜âŒâ­•ï¸ðŸ›‘â›”ï¸ðŸ“›ðŸš«ðŸ’¯ðŸ’¢â™¨ï¸ðŸš·ðŸš¯ðŸš³ðŸš±ðŸ”žðŸ“µðŸš­â—ï¸â•â“â”â€¼ï¸â‰ï¸ðŸ”…ðŸ”†ã€½ï¸âš ï¸ðŸš¸ðŸ”±âšœï¸ðŸ”°â™»ï¸âœ…ðŸˆ¯ï¸ðŸ’¹â‡ï¸âœ³ï¸âŽðŸŒðŸ’ â“‚ï¸ðŸŒ€ðŸ’¤ðŸ§ðŸš¾â™¿ï¸ðŸ…¿ï¸ðŸ›—ðŸˆ³ðŸˆ‚ï¸ðŸ›‚ðŸ›ƒðŸ›„ðŸ›…ðŸš¹ðŸšºðŸš¼âš§ðŸš»ðŸš®ðŸŽ¦ðŸ›œðŸ“¶ðŸˆðŸ”£â„¹ï¸ðŸ”¤ðŸ”¡ðŸ” ðŸ†–ðŸ†—ðŸ†™ðŸ†’ðŸ†•ðŸ†“0ï¸âƒ£1ï¸âƒ£2ï¸âƒ£3ï¸âƒ£4ï¸âƒ£5ï¸âƒ£6ï¸âƒ£7ï¸âƒ£8ï¸âƒ£9ï¸âƒ£ðŸ”ŸðŸ”¢#ï¸âƒ£*ï¸âƒ£âï¸â–¶ï¸â¸â¯â¹âºâ­â®â©âªâ«â¬â—€ï¸ðŸ”¼ðŸ”½âž¡ï¸â¬…ï¸â¬†ï¸â¬‡ï¸â†—ï¸â†˜ï¸â†™ï¸â†–ï¸â†•ï¸â†”ï¸â†ªï¸â†©ï¸â¤´ï¸â¤µï¸ðŸ”€ðŸ”ðŸ”‚ðŸ”„ðŸ”ƒðŸŽµðŸŽ¶âž•âž–âž—âœ–ï¸ðŸŸ°â™¾ðŸ’²ðŸ’±â„¢ï¸Â©ï¸Â®ï¸ã€°ï¸âž°âž¿ðŸ”šðŸ”™ðŸ”›ðŸ”ðŸ”œâœ”ï¸â˜‘ï¸ðŸ”˜ðŸ”´ðŸŸ ðŸŸ¡ðŸŸ¢ðŸ”µðŸŸ£âš«ï¸âšªï¸ðŸŸ¤ðŸ”ºðŸ”»ðŸ”¸ðŸ”¹ðŸ”¶ðŸ”·ðŸ”³ðŸ”²â–ªï¸â–«ï¸â—¾ï¸â—½ï¸â—¼ï¸â—»ï¸ðŸŸ¥ðŸŸ§ðŸŸ¨ðŸŸ©ðŸŸ¦ðŸŸªâ¬›ï¸â¬œï¸ðŸŸ«ðŸ”ˆðŸ”‡ðŸ”‰ðŸ”ŠðŸ””ðŸ”•ðŸ“£ðŸ“¢ðŸ‘â€ðŸ—¨ðŸ’¬ðŸ’­ðŸ—¯â™ ï¸â™£ï¸â™¥ï¸â™¦ï¸ðŸƒðŸŽ´ðŸ€„ï¸ðŸ•ðŸ•‘ðŸ•’ðŸ•“ðŸ•”ðŸ••ðŸ•–ðŸ•—ðŸ•˜ðŸ•™ðŸ•šðŸ•›ðŸ•œðŸ•ðŸ•žðŸ•ŸðŸ• ðŸ•¡ðŸ•¢ðŸ•£ðŸ•¤ðŸ•¥ðŸ•¦ðŸ•§',
            'Non-emoji symbols': 'âœ¢âœ£âœ¤âœ¥âœ¦âœ§â˜…â˜†âœ¯âœ¡ï¸Žâœ©âœªâœ«âœ¬âœ­âœ®âœ¶âœ·âœµâœ¸âœ¹â†’â‡’âŸ¹â‡¨â‡¾âž¾â‡¢â˜›â˜žâž”âžœâž™âž›âžâžžâ™ ï¸Žâ™£ï¸Žâ™¥ï¸Žâ™¦ï¸Žâ™¤â™§â™¡â™¢â™šâ™›â™œâ™â™žâ™Ÿâ™”â™•â™–â™—â™˜â™™âš€âšâš‚âšƒâš„âš…ðŸ‚ âšˆâš‰âš†âš‡ð“€€ð“€ð“€‚ð“€ƒð“€„ð“€…ð“€†ð“€‡ð“€ˆð“€‰ð“€Šð“€‹ð“€Œð“€ð“€Žð“€ð“€ð“€‘ð“€’ð“€“ð“€”ð“€•ð“€–ð“€—ð“€˜ð“€™ð“€šð“€›ð“€œð“€',
            'Flags': 'ðŸ³ï¸ðŸ´ðŸðŸš©ðŸ³ï¸â€ðŸŒˆðŸ³ï¸â€âš§ï¸ðŸ´â€â˜ ï¸ðŸ‡¦ðŸ‡«ðŸ‡¦ðŸ‡½ðŸ‡¦ðŸ‡±ðŸ‡©ðŸ‡¿ðŸ‡¦ðŸ‡¸ðŸ‡¦ðŸ‡©ðŸ‡¦ðŸ‡´ðŸ‡¦ðŸ‡®ðŸ‡¦ðŸ‡¶ðŸ‡¦ðŸ‡¬ðŸ‡¦ðŸ‡·ðŸ‡¦ðŸ‡²ðŸ‡¦ðŸ‡¼ðŸ‡¦ðŸ‡ºðŸ‡¦ðŸ‡¹ðŸ‡¦ðŸ‡¿ðŸ‡§ðŸ‡¸ðŸ‡§ðŸ‡­ðŸ‡§ðŸ‡©ðŸ‡§ðŸ‡§ðŸ‡§ðŸ‡¾ðŸ‡§ðŸ‡ªðŸ‡§ðŸ‡¿ðŸ‡§ðŸ‡¯ðŸ‡§ðŸ‡²ðŸ‡§ðŸ‡¹ðŸ‡§ðŸ‡´ðŸ‡§ðŸ‡¦ðŸ‡§ðŸ‡¼ðŸ‡§ðŸ‡·ðŸ‡®ðŸ‡´ðŸ‡»ðŸ‡¬ðŸ‡§ðŸ‡³ðŸ‡§ðŸ‡¬ðŸ‡§ðŸ‡«ðŸ‡§ðŸ‡®ðŸ‡°ðŸ‡­ðŸ‡¨ðŸ‡²ðŸ‡¨ðŸ‡¦ðŸ‡®ðŸ‡¨ðŸ‡¨ðŸ‡»ðŸ‡§ðŸ‡¶ðŸ‡°ðŸ‡¾ðŸ‡¨ðŸ‡«ðŸ‡¹ðŸ‡©ðŸ‡¨ðŸ‡±ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡½ðŸ‡¨ðŸ‡¨ðŸ‡¨ðŸ‡´ðŸ‡°ðŸ‡²ðŸ‡¨ðŸ‡¬ðŸ‡¨ðŸ‡©ðŸ‡¨ðŸ‡°ðŸ‡¨ðŸ‡·ðŸ‡¨ðŸ‡®ðŸ‡­ðŸ‡·ðŸ‡¨ðŸ‡ºðŸ‡¨ðŸ‡¼ðŸ‡¨ðŸ‡¾ðŸ‡¨ðŸ‡¿ðŸ‡©ðŸ‡°ðŸ‡©ðŸ‡¯ðŸ‡©ðŸ‡²ðŸ‡©ðŸ‡´ðŸ‡ªðŸ‡¨ðŸ‡ªðŸ‡¬ðŸ‡¸ðŸ‡»ðŸ‡¬ðŸ‡¶ðŸ‡ªðŸ‡·ðŸ‡ªðŸ‡ªðŸ‡ªðŸ‡¹ðŸ‡ªðŸ‡ºðŸ‡«ðŸ‡°ðŸ‡«ðŸ‡´ðŸ‡«ðŸ‡¯ðŸ‡«ðŸ‡®ðŸ‡«ðŸ‡·ðŸ‡¬ðŸ‡«ðŸ‡µðŸ‡«ðŸ‡¹ðŸ‡«ðŸ‡¬ðŸ‡¦ðŸ‡¬ðŸ‡²ðŸ‡¬ðŸ‡ªðŸ‡©ðŸ‡ªðŸ‡¬ðŸ‡­ðŸ‡¬ðŸ‡®ðŸ‡¬ðŸ‡·ðŸ‡¬ðŸ‡±ðŸ‡¬ðŸ‡©ðŸ‡¬ðŸ‡µðŸ‡¬ðŸ‡ºðŸ‡¬ðŸ‡¹ðŸ‡¬ðŸ‡¬ðŸ‡¬ðŸ‡³ðŸ‡¬ðŸ‡¼ðŸ‡¬ðŸ‡¾ðŸ‡­ðŸ‡¹ðŸ‡­ðŸ‡³ðŸ‡­ðŸ‡°ðŸ‡­ðŸ‡ºðŸ‡®ðŸ‡¸ðŸ‡®ðŸ‡³ðŸ‡®ðŸ‡©ðŸ‡®ðŸ‡·ðŸ‡®ðŸ‡¶ðŸ‡®ðŸ‡ªðŸ‡®ðŸ‡²ðŸ‡®ðŸ‡±ðŸ‡®ðŸ‡¹ðŸ‡¯ðŸ‡²ðŸ‡¯ðŸ‡µðŸŽŒðŸ‡¯ðŸ‡ªðŸ‡¯ðŸ‡´ðŸ‡°ðŸ‡¿ðŸ‡°ðŸ‡ªðŸ‡°ðŸ‡®ðŸ‡½ðŸ‡°ðŸ‡°ðŸ‡¼ðŸ‡°ðŸ‡¬ðŸ‡±ðŸ‡¦ðŸ‡±ðŸ‡»ðŸ‡±ðŸ‡§ðŸ‡±ðŸ‡¸ðŸ‡±ðŸ‡·ðŸ‡±ðŸ‡¾ðŸ‡±ðŸ‡®ðŸ‡±ðŸ‡¹ðŸ‡±ðŸ‡ºðŸ‡²ðŸ‡´ðŸ‡²ðŸ‡°ðŸ‡²ðŸ‡¬ðŸ‡²ðŸ‡¼ðŸ‡²ðŸ‡¾ðŸ‡²ðŸ‡»ðŸ‡²ðŸ‡±ðŸ‡²ðŸ‡¹ðŸ‡²ðŸ‡­ðŸ‡²ðŸ‡¶ðŸ‡²ðŸ‡·ðŸ‡²ðŸ‡ºðŸ‡¾ðŸ‡¹ðŸ‡²ðŸ‡½ðŸ‡«ðŸ‡²ðŸ‡²ðŸ‡©ðŸ‡²ðŸ‡¨ðŸ‡²ðŸ‡³ðŸ‡²ðŸ‡ªðŸ‡²ðŸ‡¸ðŸ‡²ðŸ‡¦ðŸ‡²ðŸ‡¿ðŸ‡²ðŸ‡²ðŸ‡³ðŸ‡¦ðŸ‡³ðŸ‡·ðŸ‡³ðŸ‡µðŸ‡³ðŸ‡±ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¿ðŸ‡³ðŸ‡®ðŸ‡³ðŸ‡ªðŸ‡³ðŸ‡¬ðŸ‡³ðŸ‡ºðŸ‡³ðŸ‡«ðŸ‡°ðŸ‡µðŸ‡²ðŸ‡µðŸ‡³ðŸ‡´ðŸ‡´ðŸ‡²ðŸ‡µðŸ‡°ðŸ‡µðŸ‡¼ðŸ‡µðŸ‡¸ðŸ‡µðŸ‡¦ðŸ‡µðŸ‡¬ðŸ‡µðŸ‡¾ðŸ‡µðŸ‡ªðŸ‡µðŸ‡­ðŸ‡µðŸ‡³ðŸ‡µðŸ‡±ðŸ‡µðŸ‡¹ðŸ‡µðŸ‡·ðŸ‡¶ðŸ‡¦ðŸ‡·ðŸ‡ªðŸ‡·ðŸ‡´ðŸ‡·ðŸ‡ºðŸ‡·ðŸ‡¼ðŸ‡¼ðŸ‡¸ðŸ‡¸ðŸ‡²ðŸ‡¸ðŸ‡¦ðŸ‡¸ðŸ‡³ðŸ‡·ðŸ‡¸ðŸ‡¸ðŸ‡¨ðŸ‡¸ðŸ‡±ðŸ‡¸ðŸ‡¬ðŸ‡¸ðŸ‡½ðŸ‡¸ðŸ‡°ðŸ‡¸ðŸ‡®ðŸ‡¬ðŸ‡¸ðŸ‡¸ðŸ‡§ðŸ‡¸ðŸ‡´ðŸ‡¿ðŸ‡¦ðŸ‡°ðŸ‡·ðŸ‡¸ðŸ‡¸ðŸ‡ªðŸ‡¸ðŸ‡±ðŸ‡°ðŸ‡§ðŸ‡±ðŸ‡¸ðŸ‡­ðŸ‡°ðŸ‡³ðŸ‡±ðŸ‡¨ðŸ‡µðŸ‡²ðŸ‡»ðŸ‡¨ðŸ‡¸ðŸ‡©ðŸ‡¸ðŸ‡·ðŸ‡¸ðŸ‡¿ðŸ‡¸ðŸ‡ªðŸ‡¨ðŸ‡­ðŸ‡¸ðŸ‡¾ðŸ‡¹ðŸ‡¼ðŸ‡¹ðŸ‡¯ðŸ‡¹ðŸ‡¿ðŸ‡¹ðŸ‡­ðŸ‡¹ðŸ‡±ðŸ‡¹ðŸ‡¬ðŸ‡¹ðŸ‡°ðŸ‡¹ðŸ‡´ðŸ‡¹ðŸ‡¹ðŸ‡¹ðŸ‡³ðŸ‡¹ðŸ‡·ðŸ‡¹ðŸ‡²ðŸ‡¹ðŸ‡¨ðŸ‡¹ðŸ‡»ðŸ‡»ðŸ‡®ðŸ‡ºðŸ‡¬ðŸ‡ºðŸ‡¦ðŸ‡¦ðŸ‡ªðŸ‡¬ðŸ‡§ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ðŸ´ó §ó ¢ó ³ó £ó ´ó ¿ðŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿ðŸ‡ºðŸ‡³ðŸ‡ºðŸ‡¸ðŸ‡ºðŸ‡¾ðŸ‡ºðŸ‡¿ðŸ‡»ðŸ‡ºðŸ‡»ðŸ‡¦ðŸ‡»ðŸ‡ªðŸ‡»ðŸ‡³ðŸ‡¼ðŸ‡«ðŸ‡ªðŸ‡­ðŸ‡¾ðŸ‡ªðŸ‡¿ðŸ‡²ðŸ‡¿ðŸ‡¼'
        };  
    }
    base64ToBytes( base64 )
    {
        const binString = atob( base64 );
        return Uint8Array.from( binString, ( m ) => m.codePointAt( 0 ) );
    }
    bytesToBase64( bytes ) 
    {
        const binString = Array.from( bytes, ( x ) => String.fromCodePoint( x ) ).join( '' );
        return btoa( binString );
    }
    attachDomElement()
    {
        super.attachDomElement();
        
        let self = this;
        
        this.domElement.className = 'FUIChatlog';
        
        let data = '\
        <div class="Topic"></div>\
        <div class="Messages"><div class="Incoming"></div><div class="Queue"></div></div>\
        <div class="Input"></div>\
        <div class="ChannelInfo"><div class="ChannelTopic"><div class="Close"></div><div class="Title"></div></div><div class="Info"></div></div>\
        ';
        
        // Hide the chat icon by adding the Chatroom class
        // TODO: Don't do this once we got group video chat
        if( this.options.type == 'chatroom' )
		{
			data = data.split( '"Topic"' ).join( '"Topic Chatroom"' );
		}
        
        this.domElement.innerHTML = data;
        
        this.domTopic = this.domElement.querySelector( '.Topic' );
        this.domChannelInfo = this.domElement.querySelector( '.ChannelInfo' );
        this.domChannelInfo.querySelector( '.Close' ).onclick = function()
        {
        	self.domChannelInfo.classList.remove( 'Showing' );
        	self.domElement.classList.remove( 'ChannelInfoShowing' );
        }
        
        this.domTopic.onclick = function( e )
        {
            if( e.target.nodeName != 'SPAN' ) return;
            
        	let tt = self.options.type == 'chatroom' ? i18n( 'i18n_group_info' ) : i18n( 'i18n_user_info' );
        	self.domChannelInfo.querySelector( '.Title' ).innerHTML = tt;
        
        	let info = self.domChannelInfo.querySelector( '.Info' );
        	info.innerHTML = '';
        
        	if( self.options.type == 'chatroom' )
        	{
        		let contacts = FUI.getElementByUniqueId( 'contacts' );
        		if( !contacts ) return;
		    	let i = new Image();
				let std = {
					"method": "getroomavatar",
					"groupid": self.options.cid
				};
				i.src = '/system.library/module/?module=system&command=convos&args=' + encodeURIComponent( JSON.stringify( std ) ) + '&authid=' + Application.authId;
				let d = document.createElement( 'div' );
			    d.className = 'Avatar';
				i.onload = function()
				{
				    d.classList.add( 'Loaded' );
				    d.style.backgroundImage = 'url(' + this.src + ')';
				}
			    info.appendChild( d );
			    
			    let ds = document.createElement( 'div' );
			    ds.className = 'Description';
			    ds.innerHTML = '<p>' + contacts.record.Description.split( "\n" ).join( "<br>" ) + '</p>';
			    info.appendChild( ds );
        	}
        	else
        	{
        		let contacts = FUI.getElementByUniqueId( 'contacts' );
        		if( !contacts ) return;
		    	let i = new Image();
				i.src = '/system.library/module/?module=system&command=getavatar&userid=' + contacts.userList[ self.options.cid ].userid + '&width=128&height=128&authid=' + Application.authId;
				i.onload = function()
				{
				    let d = document.createElement( 'div' );
				    d.className = 'Avatar';
				    d.style.backgroundImage = 'url(' + this.src + ')';
				    info.appendChild( d );
				}
			}
        
        	self.domChannelInfo.classList.add( 'Showing' );
        	self.domElement.classList.add( 'ChannelInfoShowing' );
        }
        
        this.domMessages = this.domElement.querySelector( '.Messages' );
        this.domInput = this.domElement.querySelector( '.Input' );
        
        if( this.options.name )
        {
        	if( this.options.type == 'jeanie' )
        	{
        		let text = this.options.name;
		        try
		        {
		            let dec = new TextDecoder().decode( self.base64ToBytes( text ) );
		            text = dec;
		        }
		        catch( e ){};
		        this.domTopic.innerHTML = '<span>' + text + '</span>';
        	}
        	else
        	{
		        this.domTopic.innerHTML = '<span>' + this.options.name + '</span>';
	        }
        }
            
        if( this.options.parentElement )
        {
            let par = document.createElement( 'div' );
            par.className = 'ParentLink';
            par.innerHTML = '';
            par.onclick = function()
            {
                let p = FUI.getElementByUniqueId( self.options.parentElement );
                p.contactsMode();
            }
            this.domTopic.appendChild( par );
            
            let us = document.createElement( 'div' );
            us.className = 'Users';
            us.innerHTML = '';
            us.onclick = function()
            {
                let p = FUI.getElementByUniqueId( self.options.parentElement );
                p.toggleUsers();
            }
            this.domTopic.appendChild( us );
            
            let vid = document.createElement( 'div' );
            vid.className = 'Video';
            vid.title = i18n( 'i18n_init_video_call' );
            vid.innerHTML = '';
            vid.onclick = function( e )
            {
            	let c = FUI.getElementByUniqueId( 'contacts' );
            	if( c )
            	{
            		cancelBubble( e );
            		return c.initVideoChat( false );
        		}
            }
            this.domTopic.appendChild( vid );
        }
        
        this.domMessages.addEventListener( 'scrollend', function( e )
        {
        	// We are at bottom
        	if( Math.ceil( self.domMessages.scrollTop ) == self.domMessages.scrollHeight - self.domMessages.offsetHeight )
        	{
        		self.hasScrolled = false;
        	}
        } );
        
        this.domMessages.addEventListener( 'scroll', function( e )
        {
        	// Did we scroll up?
        	if( self.domMessages.scrollTop < self.prevScrollTop )
        		self.hasScrolled = true;
    		
    		self.prevScrollTop = self.domMessages.scrollTop;
    		
    		if( self.scrollEndTimeo )
    			clearTimeout( self.scrollEndTimeo );
			self.scrollEndTimeo = setTimeout( function()
			{
				self.scrollEndTimeo = null;
				if( self.scrollEndEvent )
				{
					self.scrollEndEvent();
					self.scrollEndEvent = null;
				}
			}, 50 );
    		
    		self.checkUnloadedVisibleElements();
        	self.checkSeen();
        	
        	if( self.scrollFunction )
        	{
        		self.scrollFunction();
        		return cancelBubble( e );
        	}
        	if( self.domMessages.scrollTop == 0 )
        	{
        		function fetchHistory()
        		{
        			let firstMessage = self.domMessages.querySelector( '.Incoming' ).querySelector( '.Slot' );
        			if( !firstMessage ) return;
        			firstMessage = firstMessage.querySelector( '.Message' );
        			firstMessage = firstMessage.getAttribute( 'slotid' );
        			if( !firstMessage ) return;
	    			firstMessage = firstMessage.split( '-' )[1];
	    			let m = new Module( 'system' );
	    			m.onExecuted = function( me, md )
	    			{
	    				if( self.destroying ) return;
	    				if( me == 'ok' )
	    				{
	    					let news = JSON.parse( md );
	    					self.addMessages( news.messages, { history: true } );
	    				}
	    			}
	    			m.execute( 'convos', { method: 'messages', mode: 'history', startMessage: firstMessage, roomType: self.options.type, cid: self.options.cid } );
        		}
        		if( self.scrollTimeo )
        		{
        			clearTimeout( self.scrollTimeo );
        			self.scrollTimeo = setTimeout( function(){ fetchHistory(); }, 250 );
        			return;
    			}
    			self.scrollTimeo = true;
    			fetchHistory();
        	}
        } );
        
        this.initDomInput();
        
        // Set stuff on this.domElement.innerHTML
        this.refreshDom();
    }
    initDomInput()
    {
    	let self = this;
    	
    	function clearActive( exception )
    	{
    	    let divs = self.domInput.getElementsByClassName( 'InputButton' );
    	    for( let a = 0; a < divs.length; a++ )
    	    {
    	        if( divs[ a ] == exception )
    	            divs[ a ].classList.add( 'Active' );
                else 
                {
                    divs[ a ].classList.remove( 'Active' );
                    if( divs[ a ].popWidget )
                        divs[ a ].popWidget.destroy();
                }
    	    }
    	}
    	
    	this.domInput.innerHTML = '\
    		<div class="Tools"><div class="MobileMen InputButton"></div><div class="Upload InputButton"></div><div class="Search InputButton"></div><div class="Emote InputButton"></div></div><div contenteditable="true" class="Textarea"></div><div class="Send"></div>\
    	';
    	this.domTextarea = this.domInput.querySelector( '.Textarea' );
    	this.domInput.querySelector( '.MobileMen' ).onclick = function()
    	{
    	    if( this.classList.contains( 'Active' ) )
    	    {
    	        this.classList.remove( 'Active' );
    	        if( this.popWidget )
    	            this.popWidget.destroy();
    	        this.popWidget = null;
    	    }
    	    else
    	    {
    	        clearActive( this );
	        }
    	}
    	this.domInput.querySelector( '.Send' ).onclick = function()
    	{
    	    let val = self.domTextarea.innerText;
    	    if( val.split( ' ' ).join( '' ).length <= 0 )
		        return;
		    val = self.domTextarea.innerHTML;
			self.domTextarea.innerHTML = '';	
			self.domTextarea.checkHeight();
			self.queueMessage( val );
    	}
    	this.domInput.querySelector( '.Emote' ).onclick = function()
    	{
    	    if( this.classList.contains( 'Active' ) )
    	    {
    	        this.classList.remove( 'Active' );
    	        if( this.popWidget )
    	            this.popWidget.destroy();
    	        this.popWidget = null;
    	    }
    	    else
    	    {
    	        clearActive( this );
    	        
    	        let str = '';
                for( let a in self.emojis )
                {
                    str += '<p><strong class="Header">' + a + '</strong></p><div class="EmojiList">';
                    let emojilist = self.emojis[ a ];
                    for( let b = 0; b < emojilist.length; b++ )
                    {
                        let code = emojilist.codePointAt( b );
                        str += '<span class="Emoticon" attr="' + code + '">' + emojilist[ b ] + '</span>';
                    }
                    str += '</div>';
                }
    	        
    	        this.classList.add( 'Active' );
    	        let d = document.createElement( 'div' );
    	        document.body.appendChild( d );
    	        let s = this;
    	        this.popWidget = new FUIPopwidget( { 
    	            placeholderElement: d, 
    	            originElement: isMobile ? self.domInput.querySelector( '.MobileMen' ) : this, 
    	            width: 480, 
    	            height: 480, 
    	            content: str,
    	            blocker: true,
    	            clickCallback: function( e )
    	            {
    	                if( e.target && e.target.nodeName == 'SPAN' )
    	                {
    	                    let code = e.target.getAttribute( 'attr' );
                            let sel, range;
                            let node = document.createElement( 'span' );
                            node.setAttribute( 'contenteditable', 'false' );
                            node.className = 'Emoticon';
                            node.innerHTML = String.fromCodePoint( code );
                            
                            s.popWidget.destroy();
    	                    s.classList.remove( 'Active' );
    	                    let ele = isMobile ? self.domInput.querySelector( '.MobileMen' ) : false;
	                        if( ele ) ele.classList.remove( 'Active' );
                            
                            if( window.getSelection )
                            {
                                sel = window.getSelection();
                                if( sel.getRangeAt && sel.rangeCount )
                                {
                                    e.target.setAttribute( 'contenteditable', 'false' );
                                    range = sel.getRangeAt( 0 );
                                    range.deleteContents();
                                    range.insertNode( node );
                                    range.collapse( true );
                                    self.domTextarea.focus();
                                    return;
                                }
                            } 
                            self.domTextarea.appendChild( node );
                            self.domTextarea.focus();
	                    }
	                    else
	                    {
	                        s.popWidget.destroy();
	                        s.classList.remove( 'Active' );
	                        let ele = isMobile ? self.domInput.querySelector( '.MobileMen' ) : false;
	                        if( ele ) ele.classList.remove( 'Active' );
                        }
    	            }
	            } );
	            this.popWidget.onDestroy = function()
	            {
	            	s.classList.remove( 'Active' );
	            }
    	    }
    	}
    	this.domInput.querySelector( '.Upload' ).onclick = function()
    	{
    		if( isMobile )
    		{
    			DirectUpload( 'Home:Uploads/', function( response )
    			{
    				if( response.path && response.result )
    				{
    					let ext = GetFilenameExtension( response.path );
						switch( ext )
						{
							case 'jpeg':
							case 'jpg':
							case 'png':
							case 'gif':
								self.shareImageAndPost( response.path );
								break;
							default:
								self.shareFileAndPost( response.path );
								break;
						}
    				}
    			} );
    			return;
    		}
    	    let s = this;
    	    if( this.classList.contains( 'Active' ) )
    	    {
    	        this.classList.remove( 'Active' );
    	        if( this.popWidget )
    	            this.popWidget.destroy();
    	        this.popWidget = null;
    	    }
    	    else
    	    {
    	        clearActive( this );
    	        this.classList.add( 'Active' );
    	        
    	        let flags = {
					multiSelect: false,
					triggerFunction: function( arr )
					{
						s.classList.remove( 'Active' );
						
						for( let a = 0; a < arr.length; a++ )
						{
							let ext = GetFilenameExtension( arr[ a ].Path );
							switch( ext )
							{
								case 'jpeg':
								case 'jpg':
								case 'png':
								case 'gif':
									self.shareImageAndPost( arr[ a ].Path );
									break;
								default:
									self.shareFileAndPost( arr[ a ].Path );
									break;
							}
						}
					},
					path: false,
					rememberPath: true,
					type: 'load'
				};
			
				new Filedialog( flags );
    	    }
    	}
    	this.domInput.querySelector( '.Search' ).onclick = function()
    	{
    	    if( this.classList.contains( 'Active' ) )
    	    {
    	    	document.body.classList.remove( 'Search' );
    	    	self.domElement.classList.remove( 'Search' );
    	        this.classList.remove( 'Active' );
    	        self.clearSearchFilter();
    	    }
    	    else
    	    {
    	        document.body.classList.add( 'Search' );
    	        self.domElement.classList.add( 'Search' );
    	        clearActive( this );
    	        self.executeSearchFilter();
    	    }   
    	}
    	this.domTextarea.checkHeight = function()
    	{
    	    if( this.offsetHeight > 50 )
    	    {
    	        this.style.top = 50 - this.offsetHeight + 'px';
    	        this.classList.add( 'Grown' );
    	    }
    	    else
    	    {
    	        this.style.top = 0;
    	        this.classList.remove( 'Grown' );
    	    }
    	}
    	this.domTextarea.addEventListener( 'keyup', function( e )
    	{
    	    let s = this;
    	    
    	    if( e.which == 16 )
    	    {
    	        this.shiftKey = false;
	        }
	        this.checkHeight();
	        
	        let str = s.innerHTML.split( /\<.*?\>/i ).join( '' ).split( "\n" ).join( '' ).split( ' ' ).join( '' );
	        
	        // Leave this for now
	        if( document.body.classList.contains( 'Search' ) )
	        {
	        	return;
	        }
	        
	        if( str.length > 0 )
    		{
    			if( s.timeo )
    			{
    				clearTimeout( s.timeo );
    			}
				s.timeo = setTimeout( function()
				{
					s.timeo = false;
					let strnow = s.innerHTML.split( /\<.*?\>/i ).join( '' ).split( "\n" ).join( '' ).split( ' ' ).join( '' );
					if( strnow.length > 0 )
					{
						if( s.lastMessage == 'writing' ) return;
						s.lastMessage = 'writing';
						
						Application.SendChannelMsg( {
							command: 'signal',
							signal: 'writing',
							sender: Application.fullName,
							senderId: Application.uniqueId
						} );
					}
				}, 250 );
			}
    		else
    		{
    			if( s.timeo )
    			{
	    			clearTimeout( s.timeo );
	    			s.timeo = false;
    			}
    			if( s.lastMessage == 'not-writing' ) return;
    			s.lastMessage = 'not-writing';
    			
    			Application.SendChannelMsg( {
					command: 'signal',
					signal: 'not-writing',
					sender: Application.fullName,
					senderId: Application.uniqueId
				} );
    		}
    	} );
    	this.domTextarea.addEventListener( 'paste', function( e )
    	{
    		let s = this;
    		self.handlePasteEvent( e, s );
    	} );
    	this.domTextarea.addEventListener( 'keydown', function( e )
    	{
    	    if( e.which == 16 )
    	    {
    	        this.shiftKey = true;
	        }
    		else if( e.which == 13 )
    		{
    		    if( this.shiftKey )
    		    {
    		        this.checkHeight();
    		        return;
		        }
		        
    		    let val = self.domTextarea.innerText;
        	    if( val.split( ' ' ).join( '' ).length <= 0 )
        	    {
        	        this.checkHeight();
		            return;
	            }
	            
	            // Leave this for now
			    if( document.body.classList.contains( 'Search' ) )
			    {
			    	return;
			    }
	            
		        val = self.domTextarea.innerHTML;
			    self.domTextarea.innerHTML = '';	
    			cancelBubble( e );
    			
    			// Check white space
    			let candidate = val.split( /\<.*?\>/ ).join( '' );
    			candidate = candidate.split( /[\s]/ ).join( '' ).split( '&nbsp;' ).join( '' );
    			
    			if( candidate.length )
    			{
    				self.queueMessage( val );
				}
    		}
    		this.checkHeight();
		} );
    	this.domTextarea.addEventListener( 'keyup', function( e )
    	{
    		if( self.domElement.classList.contains( 'Search' ) )
    		{
    			self.executeSearchFilter();
			}
			else
			{
				self.domElement.searchString = '';
				self.clearSearchFilter();
			}
    		
    	} );
    }
    executeSearchFilter()
    {
    	let self = this;
    	let searchString = Trim( self.domTextarea.innerText ).toLowerCase();
			self.domElement.searchString = searchString;
    	if( this.esfTimeo ) clearTimeout( this.esfTimeo );
    	this.esfTimeo = setTimeout( function()
    	{
			let searchString = self.domElement.searchString;
			let messages = self.domElement.querySelector( '.Messages' ).getElementsByClassName( 'Message' );
			for( let a = 0; a < messages.length; a++ )
			{
				let t = messages[ a ].querySelector( '.Text' );
				if( t && t.innerText.toLowerCase().indexOf( searchString ) < 0 )
				{
					messages[ a ].style.display = 'none';
					messages[ a ].setAttribute( 'hidden', 'hidden' );
				}
				else
				{
					messages[ a ].style.display = '';
					messages[ a ].removeAttribute( 'hidden' );
				}
			}
			self.refreshDom();
		}, 250 );
    }
    clearSearchFilter()
    {
    	let self = this;
    	if( this.csfTimeo ) clearTimeout( this.csfTimeo );
    	this.csfTimeo = setTimeout( function()
    	{
    		self.csfTimeo = null;
			let messages = self.domElement.querySelector( '.Messages' ).getElementsByClassName( 'Message' );
			for( let a = 0; a < messages.length; a++ )
			{
				messages[ a ].style.display = '';
				messages[ a ].removeAttribute( 'hidden' );
			}
			self.refreshDom();
		}, 250 );
    }
    parseDate( instr, full = false, tz = false )
    {
        let now  = tz ? ( new Date( new Date(       ).toLocaleString( 'en-US', { timeZone: tz } ) ) ) : new Date();        
        
        // Make diff
        let dif1 = tz ? ( new Date( new Date().toLocaleString( 'en-US', { timeZone: tz } ) ) ) : new Date( instr );
        let dif2 = new Date();
        
        // Fix the time difference
        instr -= ( dif1.getTime() - dif2.getTime() );
        
        let time = tz ? ( new Date( new Date( instr ).toLocaleString( 'en-US', { timeZone: tz } ) ) ) : new Date( instr );
        
        let test = time.getFullYear() + '-' + StrPad( time.getMonth() + 1, 2, '0' ) + '-' + StrPad( time.getDate(), 2, '0' ) + 
        	' ' + StrPad( time.getHours(), 2, '0' ) + ':' + StrPad( time.getMinutes(), 2, '0' ) + ':' + StrPad( time.getSeconds(), 2, '0' );
        
        let secs = Math.floor( now.getTime() / 1000 ) - Math.floor( time.getTime() / 1000 );
        let mins = Math.floor( secs / 60 );
        
        if( !full )
        {
		    if( secs <= 60 )
		    {
		        if( secs < 1 )
		        {
		            return i18n( 'i18n_just_now' );
		        }
		        return secs.toFixed( 0 ) + ' ' + i18n( 'i18n_seconds_ago' ) + '.';
		    }
		    else if( secs <= 3600 )
		    {
		        return mins + ' ' + i18n( 'i18n_minutes_ago' ) + '.';
		    }
		    else if( secs <= 86400 )
		    {
		        return Math.floor( secs / 60 / 60 ) + ' ' + i18n( 'i18n_hours_ago' );
		    }
	    }
        instr = this.getMonthName( time.getMonth() ) + ' ' + this.getDay( time.getDate() ) + ', ' + time.getFullYear();
        if( test == instr.substr( 0, test.length ) )
            return instr.substr( test.length, instr.length - test.length );
        return instr;
    }
    getMonthName( num )
    {
    	let months = [ 'january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december' ];
    	return i18n( 'i18n_' + months[ num ] );
    }
    getDay( num )
    {
    	return num;
    }
    // Share an image and post it
    shareImageAndPost( path )
    {
    	let self = this;
    	let m = new Module( 'system' );
		m.onExecuted = function( me, md )
		{
			if( self.destroying ) return;
			if( me == 'ok' )
			{
				let res = JSON.parse( md );
				let i = new Image();
				i.src = res.url + '&authid=' + Application.authId;
				i.onload = function()
				{
					self.queueMessage( '<attachment type="' + res.type + '" image="' + res.url + '" width="' + this.naturalWidth + '" height="' + this.naturalHeight + '"/>' );
				}
			}
		}
		let zmsg = { method: 'addupload', path: path, type: 'image' };
		if( self.options.type == 'dm-user' )
		{
			zmsg.userId = self.options.cid;
		}
		else if( self.options.type == 'jeanie' )
		{
			zmsg.context = 'jeanie';
		}
		else
		{
			zmsg.groupId = self.options.cid;
		}
		m.execute( 'convos', zmsg );
    }
    // Share a file and post it
    shareFileAndPost( path )
    {
    	let self = this;
    	let m = new Module( 'system' );
		m.onExecuted = function( me, md )
		{
			if( self.destroying ) return;
			if( me == 'ok' )
			{
				let res = JSON.parse( md );
				if( GetFilenameExtension( path ) == 'pdf' )
				{
					self.queueMessage( '<attachment type="pdf" file="' + res.url + '" filename="' + GetFilename( path ) + '"/>' );
				}
				else self.queueMessage( '<attachment type="download" file="' + res.url + '" filename="' + GetFilename( path ) + '"/>' );
			}
		}
		let zmsg = { method: 'addupload', path: path, type: 'file' };
		if( self.options.type == 'dm-user' )
		{
			zmsg.userId = self.options.cid;
		}
		else if( self.options.type == 'jeanie' )
		{
			zmsg.context = 'jeanie';
		}
		else
		{
			zmsg.groupId = self.options.cid;
		}
		m.execute( 'convos', zmsg );
    }
    // Just updates a message
    updateMessage( messageId, content )
    {
    	let self = this;
    	let messages = self.domMessages.getElementsByClassName( 'Message' );
    	for( let a = 0; a < messages.length; a++ )
    	{
    		if( messages[ a ].getAttribute( 'mid' ) == messageId )
    		{
    			let t = messages[ a ].querySelector( '.Text' );
    			if( t )
    			{
    				let text = content;
    				try
				    {
				        let dec = new TextDecoder().decode( self.base64ToBytes( text ) );
				        text = dec;
				    }
				    catch( e ){};
    				t.innerHTML = self.replaceEmojis( self.replaceUrls( text ) );
    			}
    		}
    	}
    }
    // Just updates a message
    removeMessage( messageId )
    {
    	let self = this;
    	let messages = self.domMessages.getElementsByClassName( 'Message' );
    	for( let a = 0; a < messages.length; a++ )
    	{
    		if( messages[ a ].getAttribute( 'mid' ) == messageId )
    		{
    			messages[ a ].parentNode.removeChild( messages[ a ] );
    		}
    	}
    	this.refreshDom();
    }
    // Adds messages to a list locked by sorted timestamps
    addMessages( messageList, flags = false )
    {
        let self = this;
        
        // We are busy adding messages, try later
        if( self.busyMessages )
        {
        	return setTimeout( function(){ self.addMessages( messageList, flags ); }, 100 );
        }
        
        // Now we are busy
        self.busyMessages = true;
        
        // Fix the unread messages
        if( self.options.type == 'chatroom' && window.unreadMessages && unreadMessages.rooms[ self.options.cid ] )
        {
        	unreadMessages.rooms[ self.options.cid ] = [];
        	let cnvs = FUI.getElementByUniqueId( 'convos' );
        	cnvs.updateActivityBubble();
        }
        // Same for users
        else if( self.options.type == 'dm-user' && window.unreadMessages && unreadMessages.dms[ self.options.cid ] )
        {
        	unreadMessages.dms[ self.options.cid ] = [];
        	let cts = FUI.getElementByUniqueId( 'contacts' );
        	cts.updateActivityBubble();
        }
        
        let history = false;
        if( flags && flags.history )
        	history = true;
        
        // Check if we have scrolled
        let scrolled = this.checkScrolled();
       
       	// Current scroll height
        let currScrollHeight = self.domMessages.scrollHeight;
       
        let newMessages = [];
        let firstMessage = self.domMessages.querySelector( '.Message' );
        
        // Add oldest messages first
        for( let a = messageList.length - 1; a >= 0; a-- )
        {
            let m = messageList[a];
            
            if( !m.ID ) continue; // Skip unregistered messages
            
            // Find highest message ID
            if( parseInt( m.ID ) > self.lastId )
                self.lastId = parseInt( m.ID );
            
            let d = document.createElement( 'div' );
            d.className = 'Message';
            d.classList.add(Â 'Showing' );
            d.setAttribute( 'tz', m.Timezone );
            d.setAttribute( 'owner', m.Name );
	        d.setAttribute( 'seen', m.Seen == 1 ? 'yes' : 'no' );
            if( history )
            	d.style.display = 'none';
        	newMessages.push( d );
            
            let text = m.Message;
            try
            {
                let dec = new TextDecoder().decode( self.base64ToBytes( m.Message ) );
                text = dec;
            }
            catch( e ){};
            
            let mess = md5( m.Message );
            d.setAttribute( 'message-hash', mess );
            d.setAttribute( 'mid', m.ID );
            
            // Get toolbar to handle own messages
            let toolbar = FUI.getFragment( 'chat-message-toolbar' );
            
            if( !m.Own )
            	toolbar = '';
            
            let replacements = {
                message: self.replaceEmojis( self.replaceUrls( text ) ),
                i18n_date: i18n( 'i18n_date' ),
                i18n_fullname: i18n( 'i18n_fullname' ),
                date: self.parseDate( m.Date, false, m.Timezone ),
                signature: '',
                fullname: m.Own ? i18n( 'i18n_you' ) : ( m.FullName ? m.FullName : m.Name ),
                toolbar: toolbar
            };
		    d.innerHTML = FUI.getFragment( 'chat-message-head', replacements );
	                    
            // Setup message input events static function
            ( function( message, par )
            {
		        let td = par.querySelector( '.Delete' );
		        if( td )
		        {
				    td.onclick = function()
				    {
				    	Confirm( i18n( 'i18n_deleting_message' ), i18n( 'i18n_deleting_message_text' ), function( response )
				    	{
				    		if( self.destroying ) return;
				    		if( response.data == true )
				    		{
				    			let mo = new Module( 'system' );
				    			mo.onExecuted = function( me, md )
				    			{
				    				if( self.destroying ) return;
				    				if( me == 'ok' )
				    				{
										d.parentNode.removeChild( par );
										Application.holdConnection( { 
											method: 'messages', 
											roomType: self.options.type ? self.options.type : '', 
											cid: self.options.cid ? self.options.cid : ''
										} );
										Application.SendChannelMsg( {
											command: 'message-remove',
											mid: m.ID,
											sender: Application.fullName,
											senderId: Application.uniqueId
										} );
									}
				    			}
				    			mo.execute( 'convos', { method: 'deletemessage', mid: message.ID } );
				    		}
				    	} );
				    }
			    }
			    let te = par.querySelector( '.Edit' );
			    if( te )
			    {
			    	te.onclick = function()
			    	{
			    		let cc = this;
			    		document.body.classList.add( 'Editmode' );
			    		let t = d.querySelector( '.Text' );
			    		t.setAttribute( 'contenteditable', 'true' );
			    		t.focus();
			    		let original = t.innerHTML;
			    		let edited = false;
			    		t.onblur = function(){ edt(); }
			    		t.onkeydown = function( e )
			    		{ 
			    			if( e.which == 27 )
			    			{ 
			    				t.removeAttribute( 'contenteditable' ); t.innerHTML = original; 
		    					return cancelBubble( e ); 
	    					}
	    					if( !e.shiftKey && e.which == 13 )
	    					{ 
	    						edt(); return cancelBubble( e ); 
    						} 
    					}
			    		function edt()
			    		{
			    			if( edited ) return;
			    			edited = true;
			    			t.setAttribute( 'contenteditable', 'false' );
			    			document.body.classList.remove( 'Editmode' );
			    			cc.onblur = null;
			    			
			    			// Strip scripts and such
							let val = t.innerHTML.split( /<script.*?\>[\w\W]*?\<\/script\>/i ).join( '' );
							val = val.split( /<style.*?\>[\w\W]*?\<\/style\>/i ).join( '' );
							val = val.split( /<link.*?\>/i ).join( '' );
							
							t.innerHTML = self.replaceEmojis( self.replaceUrls( val ) );
							
							// Check white space
							let candidate = val.split( /\<.*?\>/ ).join( '' );
							candidate = candidate.split( /[\s]/ ).join( '' ).split( '&nbsp;' ).join( '' );
			    			
			    			// TODO: If empty, run delete on the method..
			    			if( candidate.length )
			    			{
								let text = self.bytesToBase64( new TextEncoder().encode( val ) );
								
								let mo = new Module( 'system' );
								mo.onExecuted = function( mm, mr )
								{
									if( self.destroying ) return;
									// Signal others!
									if( mm == 'ok' )
									{
										Application.SendChannelMsg( {
											command: 'message-update',
											mid: m.ID,
											sender: Application.fullName,
											senderId: Application.uniqueId,
											content: text
										} );
									}
								}
								mo.execute( 'convos', { method: 'message-edit', mid: m.ID, message: encodeURIComponent( text ) } );
							} 
			    		}
			    	}
			    }
	        } )( m, d );
            
            let timestamp = Math.floor( ( new Date( m.Date ) ).getTime() / 1000 );
            if( m.Own ) d.classList.add( 'Own' );
            
            // Get slot
            let slot = StrPad( m.ID, 16, '0' );
            let slotId = slot + '-' + m.ID + '-' + timestamp;
            d.setAttribute( 'slotId', slotId ); // If we will use this new element, give slotid
            
            // Update a message in a time slot
            if( this.messageList[ slot ] && this.messageList[ slot ].parentNode )
            {
                let found = false;
                for( let b = 0; b < this.messageList[ slot ].childNodes.length; b++ )
                {
                    if( this.messageList[ slot ].childNodes[ b ].getAttribute( 'slotId' ) == slotId )
                    {
                        found = this.messageList[ slot ].childNodes[ b ];
                        break;
                    }
                }
                // Replace existing node
                if( found )
                {
                	// Only update content that changed
                	if( found.getAttribute( 'message-hash' ) != mess )
                	{
		                this.messageList[ slot ].replaceChild( d, found );
	                }
                }
                // Add a new node to this group slot
                else
                {
                    this.messageList[ slot ].appendChild( d );
                }
                if( !this.checkScrolled() )
					this.toBottom();
            }
            // Insert a message in a timestamp slot
            else
            {
                let grp = document.createElement( 'div' );
                grp.className = 'Slot';
                grp.appendChild( d );
                
                this.messageList[ slot ] = grp;
                
                // Just holds a list of slot identifiers
                this.messageListOrder.push( slot );
                this.messageListOrder.sort();

                // First message
                if( this.messageListOrder.length == 1 )
                {
                    // Create group
                    this.domMessages.querySelector( '.Incoming' ).appendChild( grp );
                    if( !this.checkScrolled() )
    					this.toBottom();
                }
                // We are looking for a place to add
                else
                {
                    for( let b = 0; b < this.messageListOrder.length; b++ )
                    {
                        let last = b == this.messageListOrder.length - 1;
                        let slotHere = this.messageListOrder[ b ];
                        // We found our slot
                        if( slotHere == slot )
                        {
                            // Add since we're the last in the list
                            if( last )
                            {
                                this.domMessages.querySelector( '.Incoming' ).appendChild( grp );
                            }
                            else if( b == 0 )
                            {
                            	// add to existing slot
                            	let sl = this.domMessages.querySelector( '.Slot' );
                            	if( sl )
                            	{
                            		sl.parentNode.insertBefore( grp, sl );
                        	 	}
                        	 	// First element!
                        	 	else
                        	 	{
                        	 		this.domMessages.querySelector( '.Incoming' ).appendChild( grp );
                        	 		
                    	 		}
                            }
                            // Insert before previous
                            else
                            {
                                this.domMessages.querySelector( '.Incoming' ).insertBefore( grp, this.messageList[ this.messageListOrder[ b + 1 ] ] );
                            }
                            if( !this.checkScrolled() )
            					this.toBottom();
                            break;
                        }
                    }
                }
            }
        }
        
        // New scroll height
        if( history )
        {
            let scrollTimeo = null;
			self.scrollFunction = function()
			{	
				self.domMessages.style.scrollBehavior = 'inherit';
				self.domMessages.scrollTop = firstMessage.offsetTop - 27;
				self.domMessages.style.scrollBehavior = '';
				if( scrollTimeo )
    				clearTimeout( scrollTimeo );
				scrollTimeo = setTimeout( function()
				{
				    scrollTimeo = null;
					self.scrollFunction = null;
				}, 200 );
			};
			for( let a = 0; a < newMessages.length; a++ )
			{
        		newMessages[ a ].style.display = '';
        		self.scrollFunction();
    		}
			self.scrollFunction();
			console.log( 'Scrollfunc' );
	    }
        
        this.refreshDom();
        
		self.busyMessages = false;
    }
    handlePasteEvent( evt, textarea )
	{
		let self = this;
		let pastedItems = ( evt.clipboardData || evt.originalEvent.clipboardData ).items;
		for( let i in pastedItems )
		{
			let item = pastedItems[i];
			if(Â item.kind === 'file' )
			{
				let blob = item.getAsFile();
				self.uploadBlob = blob;
				self.uploadPastedFile( self.uploadBlob );
				setTimeout( function(){ textarea.innerHTML = ''; textarea.checkHeight(); }, 100 );
			} 
		}
	}
	uploadPastedFile( file )
	{
		let self = this;
		
		function fileExists( filename, cbk )
		{
			let d = new Door( 'Home:Uploads/' );
			d.getIcons( function( list )
			{
				let ext = filename.split( '.' ).pop();
				let original = filename.substr( 0, filename.length - ( ext.length + 1 ) );
				
				let exists = false;
				let num = 0;
				let cand = '';
				do
				{
					exists = false;
					cand = original + ( num > 0 ? ( '_' + num ) : '' ) + '.' + ext;
					for( let a = 0; a < list.length; a++ )
					{
						if( list[a].Type == 'File' && list[a].Filename == cand )
						{
							exists = true;
							break;
						}
					}
					num++;
				}
				while( exists );
				
				if( cbk )
				{
					cbk( cand );
				}
			} );
		}
	
		// Check if file exists
		fileExists( file.name, function( resname )
		{
			let formData = new FormData();
			formData.append( resname, file, resname );
			let xhr = new XMLHttpRequest();
			xhr.open( 'POST', '/system.library/file/upload?authid=' + Application.authId + '&filename=' + resname + '&path=Home:Uploads/', true);
			xhr.onload = function (e) {
				if (xhr.readyState === 4 && xhr.status === 200) 
				{
					self.shareImageAndPost( 'Home:Uploads/' + resname );
				}
			};
			xhr.send( formData );
		} );
	}
    setTopic( topic, type = false )
    {
    	// Jeanie is a top level chat
    	// TODO: Figure out if we are showing contacts or not while running 
    	//       this topic
    	if( type != 'jeanie' )
    	{
    		let p = this.domTopic.querySelector( '.ParentLink' );
    		let u = this.domTopic.querySelector( '.Users' );
    		this.domTopic.innerHTML = '<span>' + topic + '</span>';
			if( p ) this.domTopic.appendChild( p );
			if( u ) this.domTopic.appendChild( u );
		}
		else
		{
			this.domTopic.innerHTML = '<span>' + topic + '</span>';
		}
    }
    // Did we scroll?
    checkScrolled()
    {
    	let scr = self.hasScrolled && Math.ceil( this.domMessages.scrollTop ) + 100 < this.domMessages.scrollHeight - this.domMessages.offsetHeight;    	
    	return scr;
    }
    // Scroll to the bottom of messages
    toBottom( way = false )
    {
    	let self = this;
    	this.checkUnloadedVisibleElements();
        if( way == 'smooth' )
        {
            this.domMessages.scrollTop = this.domMessages.scrollHeight;
            return;
        }
        this.domMessages.style.scrollBehavior = 'inherit';
        this.domMessages.scrollTop = this.domMessages.scrollHeight;
        setTimeout( function(){ self.domMessages.style.scrollBehavior = 'smooth'; }, 5 );
    }
    // Message is added via input gui
    queueMessage( string )
    {
        let self = this;
        
        // When in a lock, just wait
        if( self.lock )
        {
            return setTimeout( function(){ self.queueMessage( string ); }, 250 );
        }
        
        // Strip scripts and such
		string = string.split( /<script.*?\>[\w\W]*?\<\/script\>/i ).join( '' );
		string = string.split( /<style.*?\>[\w\W]*?\<\/style\>/i ).join( '' );
		string = string.split( /<link.*?\>/i ).join( '' );
        
        // Etherpad links
        let ebase = document.location.host.split( '.' );
        if( ebase.length > 2 )
        	ebase = ebase[ ebase.length - 2 ] + '.' + ebase[ ebase.length - 1 ];
        else ebase = ebase.join( '.' );
        ebase = document.location.protocol + '//'+ 'etherpad.' + ebase;
        let eb = string.indexOf( ebase );
        if( eb >= 0 )
        {
        	let repl = '';
        	for( let i = eb; i < string.length; i++ )
        	{
        		if( string[ i ] == ' ' || string[ i ] == "\t" || string[ i ] == "\n" )
        			break;
        		repl += string[ i ];
        	}
        	string = string.split( repl ).join( '<attachment etherpad="' + repl + '"/>' );
        }
        
        let scrolled = this.checkScrolled();
        
    	let dom = document.createElement( 'div' );
    	dom.className = 'Message Own Queue';
    	dom.innerHTML = '<p>' + string + '</p>';
    	dom.setAttribute( 'timestamp', ( new Date() ).getTime() );
    	this.domMessages.querySelector( '.Queue' ).appendChild( dom );
    	
    	// Add queue to Convos
    	if( window.Convos )
    	{
    	    let text = self.bytesToBase64( new TextEncoder().encode( string ) );
    	    let ms = {
    	        timestamp: parseInt( parseFloat( dom.getAttribute( 'timestamp' ) ) / 1000 ),
    	        message: encodeURIComponent( text ),
    	        type: this.options.type ? this.options.type : '',
    	        targetId: this.options.cid
    	    };
    	    Convos.outgoing.push( ms );
    	    Application.holdConnection( { 
    	        method: 'messages', 
    	        roomType: this.options.type ? this.options.type : '', 
    	        cid: this.options.cid ? this.options.cid : '',
    	        lastId: this.lastId,
    	        force: true
	        } );
    	}
    	
    	// Play a sound when sending
    	Sounds.sendMessage.play();
    	self.domTextarea.focus();
    	
    	setTimeout( function()
    	{
    		dom.classList.add( 'Showing' );
		}, 2 );
    }
    // Just do a message refresh from the last id
    refreshMessages()
    {
        let msg = { 
            method: 'messages', 
            roomType: this.options.type ? this.options.type : '', 
            cid: this.options.cid ? this.options.cid : '',
            lastId: this.lastId
        };
        Application.holdConnection( msg );
    }
    // Add element of loading data
    addDataLoading( id )
    {
    	if( !this.loadObjects[ id ] )
    	{
			this.loadObjects[ id ] = true;
			this.loadingData++;
		}
    }
    // Element stopped loading data
    remDataLoading( id )
    {
    	let o = {};
    	let cnt = 0;
    	for( let a in this.loadObjects )
    	{
    		if( a != id )
    		{
    			o[ a ] = this.loadObjects[ a ];
    			cnt++;
    		}
    	}
    	this.loadObjects = o;
    	this.loadingData = cnt;
    	
    	// Check if all is loaded
		if( cnt == 0 )
		{
			if( !this.checkScrolled() )
			{
				this.toBottom();
			}
		}
    }
    // Clear input submission queue
    clearQueue()
    {
        let self = this;
        self.lock = true;
        let queue = this.domMessages.querySelector( '.Queue' );
        let messages = queue.getElementsByClassName( 'Message' );
        for( let a = 0; a < messages.length; a++ )
        {
            ( function( mess )
            {
                if( mess.parentNode )
                    mess.parentNode.removeChild( mess );
            } )( messages[ a ] );
        }
        setTimeout( function()
        {
            self.lock = false;
        }, 250 );
    }
    grabAttributes( domElement )
    {
        super.grabAttributes( domElement );
        
        let uniqueId = domElement.getAttribute( 'uniqueid' );
        if( uniqueId ) this.options.uniqueid = uniqueId;
        
        let type = domElement.getAttribute( 'type' );
        if( type ) this.options.type = type;
        
        let cid = domElement.getAttribute( 'cid' );
        if( cid ) this.options.cid = cid;
        
        let context = domElement.getAttribute( 'context' );
        if( context ) this.options.context = context;
        
        let name = domElement.getAttribute( 'name' );
        if( name ) this.options.name = name;
        
        let parentElement = domElement.getAttribute( 'parentelement' );
        if( parentElement ) this.options.parentElement = parentElement;
    }
    // Check the elements that haven't loaded, but should be visible
    checkUnloadedVisibleElements()
    {
    	let self = this;
    	// Delayed check
    	let messages = self.domMessages.getElementsByClassName( 'Message' );
		for( let a = 0; a < messages.length; a++ )
		{
			if( self.elementVisible( messages[ a ] ) )
			{
				self.checkQueuedImage( messages[a] );
				self.checkLink( messages[a] );
			}
		}
    }
    // Check if a message was seen
    checkSeen( setYes = false )
    {
    	let self = this;
    	if( this.seenTimeo )
    		clearTimeout( this.seenTimeo );
    	this.seenTimeo = setTimeout( function()
    	{
    		let messages = self.domMessages.getElementsByClassName( 'Message' );
    		let top = self.domMessages.scrollTop;
    		let bottom = self.domMessages.offsetHeight + top;
    		let updates = [];
    		for( let a = 0; a < messages.length; a++ )
    		{
    			// We are setting seen
    			if( setYes )
    			{
    				let found = false;
    				for( let b = 0; b < setYes.length; b++ )
    				{
						if( messages[ a ].getAttribute( 'mid' ) == setYes[ b ] )
						{
							messages[ a ].setAttribute( 'seen', 'yes' );
							found = true;
							break;
						}
					}
					if( found ) continue;
				}
    			// These are invisible
    			if( messages[ a ].offsetTop > bottom || messages[ a ].offsetTop + messages[ a ].offsetHeight < top )
    			{
    				continue;
    			}
    			// These are visible
    			else
    			{
    				if( messages[ a ].getAttribute( 'seen' ) == 'no' )
    				{
    					if( !messages[ a ].classList.contains( 'Own' ) )
    					{
							messages[ a ].setAttribute( 'seen', 'yes' );
							updates.push( messages[ a ].getAttribute( 'mid' ) );
						}
    				}
    			}
    		}
    		let m = new Module( 'system' );
    		m.execute( 'convos', { method: 'message-seen', messages: updates } );
    	}, 250 );
    }
    refreshDom( evaluated = false )
    {
        super.refreshDom();
        let self = this;
        
        if( this.refreshing ) return setTimeout( function(){ self.refreshDom( evaluated ); }, 50 );
        this.refreshing = true;
        
        // Check if messages were seen
        self.checkSeen();
        
        // Let's do some message owner management for styling
        let source = this.domElement.getElementsByClassName( 'Message' );
        let messages = [];
        
        // Fix links
        for( let a = source.length - 1; a > 0; a-- )
        {
        	if( !source[ a ].getAttribute( 'hidden' ) )     	
	        	self.checkLink( source[ a ] );
    	}
    	// Add new message array
        for( let a = 0; a < source.length; a++ )
        {
        	// Skip hiddens
        	if( !source[ a ].getAttribute( 'hidden' ) && !source[ a ].classList.contains( 'Queue' ) ) 
        		messages.push( source[ a ] );
        }
        
        let lastOwner = false;
        let lastDate = false;
        let prevDate = false;
        
        // Make date dividers
        let outMessages = [];
        for( let a = 0; a < messages.length; a++ )
        {
        	if( messages[ a ].classList.contains( 'MessageDateDivider' ) )
        	{
        		outMessages.push( messages[ a ] );
        		continue;
        	}
        	let date = messages[ a ].querySelector( '.Date' );
        	let tstm = messages[ a ].getAttribute( 'slotid' )
        	let day = parseInt( tstm.split( '-' )[2] ) * 1000;
        	let dt = new Date( day );
        	let dateCand = dt.getDate() + '-' + ( dt.getMonth() + 1 );
        	if( !self.messageDateDividers[ dateCand ] && prevDate != dateCand )
        	{
        		let tz = messages[ a ].getAttribute( 'tz' );
	        	let s = document.createElement( 'div' );
	        	s.className = 'Slot';
	        	messages[a].parentNode.parentNode.insertBefore( s, messages[a].parentNode );
	        	let nd = document.createElement( 'div' );
	        	nd.className = 'Message MessageDateDivider Showing';
	        	nd.innerHTML = self.parseDate( day, true, tz );
	        	nd.setAttribute( 'owner', '--' );
	        	nd.setAttribute( 'slotid', tstm + '-divider' );
	        	s.appendChild( nd );
	        	
	        	if( !self.checkScrolled() ) self.toBottom();
	        	
	        	outMessages.push( nd );
	        	prevDate = dateCand;
	        	
		    	self.messageDateDividers[ dateCand ] = true;
	    	}
	    	outMessages.push( messages[ a ] );
	    	prevDate = dateCand;
        }
        
        // Parsed
        messages = outMessages;
        
        for( let a = 0; a < messages.length; a++ )
        {
        	let date = messages[ a ].querySelector( '.Date' );
            let tstm = messages[ a ].getAttribute( 'slotid' );
            
            if( tstm && date )
            {
	            let tz = messages[ a ].getAttribute( 'tz' );
	            let day = parseInt( tstm.split( '-' )[2] ) * 1000;
                let newDate = self.parseDate( day, false, tz );
                date.innerHTML = newDate;
                if( self.elementVisible( messages[ a ] ) )
                {
                	self.checkQueuedImage( messages[ a ] );
					self.checkLink( messages[ a ] );
                }
            }
            
            let owner = messages[ a ].getAttribute( 'owner' ); // current user
            let powner = a > 0 ? messages[ a - 1 ].getAttribute( 'owner' ) : false; // previous user
            let nowner = a + 1 < messages.length ? messages[ a + 1 ].getAttribute( 'owner' ) : false; // next user
            
            messages[a].classList.remove( 'FirstForOwner', 'LastForOwner', 'ConceilOwner', 'OnlyMessage' );
            
            if( owner == lastOwner ) // Don't show owner name twice
            {
                messages[ a ].classList.add( 'ConceilOwner' );
                if( a + 1 < messages.length && nowner != owner )
                {
                    messages[ a ].classList.add( 'LastForOwner' );
                }
            }
            else if( a + 1 < messages.length && nowner == owner && ( !powner || powner != owner ) )
            {
                messages[ a ].classList.add( 'FirstForOwner' );
            }
            
            // First message
            if( ( !powner && !nowner ) || ( !powner && !lastOwner && nowner && nowner != owner ) )
            {
            	messages[ a ].classList.add( 'OnlyMessage' );
            }
            // Prev message has different owner and next message has different owner
            if( powner && powner != owner && nowner && nowner != owner )
            {
            	messages[ a ].classList.add( 'OnlyMessage' );
            }
            // Prev owner is different, and it's the last message
            if( powner && powner != owner && !nowner )
            {
            	messages[ a ].classList.add( 'OnlyMessage' );
            }
            
            if( a + 1 >= messages.length && messages[Â a ].classList.contains( 'ConceilOwner' ) )
            {
                messages[ a ].classList.add( 'LastForOwner' );
            }
            lastOwner = owner;
        }
        
        this.domElement.classList.add( 'Initialized' );
        
        if( !this.checkScrolled() )
			this.toBottom();
        
        this.refreshing = false;
       
    }
    elementVisible( ele )
    {
    	let t = GetElementTop( ele );
    	if( t + ele.offsetHeight > this.domMessages.scrollTop && t < this.domMessages.scrollTop + this.domMessages.offsetHeight )
    		return true;
    	return false;
    }
    // Get markup for object
    getMarkup( data )
    {
    	// Return meta-markup for class instantiation later
    	let props = '';
    	let n = 0;
    	for( let a in this.options )
    	{
    	    if( n++ > 0 ) props += ' ';
    	    props += a + '="' + props[ a ] + '"';
    	}
    	return '<fui-chatlist' + props + '></fui-chatlist>';
    }
    // Just display an error message
    errorMessage( string )
    {
        this.domElement.innerHTML = '<h2 class="Error">' + string + '</h2>';
    }
    checkQueuedImage( div )
    {
    	let self = this;
    	
        let q = div.getElementsByTagName( 'queued-img' );
    	if( q && q[0] )
    	{
    		q = q[0]; 
    		
    		let i = document.createElement( 'img' );
    		self.addDataLoading( i );
    		for( let a in q.attributes )
    		{
    			let n = q.attributes[a].nodeName;
    			if( q.attributes[a].nodeValue && n != 'onload' && n != 'prestr' && n != 'od' )
	    			i.setAttribute( q.attributes[a].nodeName, q.attributes[a].nodeValue );
    		}
    		if( typeof( FriendConvos.imageCache[ i.src ] ) != 'undefined' )
    		{
    			i = FriendConvos.imageCache[ i.src ];
    			i.width = i.naturalWidth;
    			i.height = i.naturalHeight;
    		}
    		else
    		{
    			FriendConvos.imageCache[ i.src ] = i;
    		}
    		i.onload = function()
    		{
    			self.remDataLoading( i );
    			Application.handleImageLoad( this, q.getAttribute( 'prestr' ) + q.getAttribute( 'od' ), false );
			}
			i.onerror= function()
			{
				self.remDataLoading();
				Application.handleImageError( this );
			}
    		q.parentNode.replaceChild( i, q );
    		if( i.naturalWidth )
	    		i.onload();
    	}
    }
    checkLink( div )
    {
        let self = this;
        
        let ele = div.querySelector( '.WebLink' );
        if( !ele ) return;
        
        if( !ele.classList.contains( 'LinkChecked' ) )
        {
            ele.classList.add( 'LinkChecked' );
            ( function( el )
            {
                let m = new Module( 'system' );
                self.addDataLoading( m );
                m.onExecuted = function( me, md )
                {
                	if( self.destroying ) return self.remDataLoading( m );
                    if( !el.parentNode ) return self.remDataLoading( m );
                    if( me != 'ok' )
                    {
                    	self.remDataLoading( m );
                        return;
                    }
                    let ne = document.createElement( 'div' );
                    ne.className = 'WebLinkPreview';
                    el.parentNode.replaceChild( ne, el );
                    let ln = document.createElement( 'p' );
                    ln.className = 'WebLinkP';
                    ln.appendChild( el );
                    
                    let ogs = {};
                    while( 1 )
                    {
                        let res = md.match( /\sproperty\=\"og\:(.*?)\".*?content\=\"(.*?)\"/i );
                        if( res != null )
                        {
                            ogs[ res[1] ] = res[2];
                            md = md.split( res[0] ).join( '' );
                            continue;
                        }
                        break;
                    }
                    
                    let w = false;
                    let h = false;
                    if( ogs[ 'image:height' ] ) h = ogs[ 'image:height' ];
                    if( ogs[ 'image:width' ] ) w = ogs[ 'image:width' ];
                    
                    let sn = false;
                    if( ogs.site_name )
                    {
                        sn = document.createElement( 'p' );
                        sn.innerHTML = ogs.site_name;
                        sn.className = 'OGSite';
                        sn.onclick = function()
                        {
                            window.open( el.getAttribute( 'href' ), '_blank' );
                        }
                        ne.appendChild( sn );
                    }
                    if( ogs.title && ( !ogs.site_name || ogs.site_name != ogs.title ) )
                    {
                        if( sn )
                        {
                            sn.innerHTML += ' - ' + ogs.title;
                        }
                        else
                        {
                            let p = document.createElement( 'p' );
                            p.innerHTML = ogs.title;
                            p.className = 'OGSite';
                            ne.appendChild( p );
                            p.onclick = function()
                            {
                                window.open( el.getAttribute( 'href' ), '_blank' );
                            }
                        }
                    }
                    if( ogs.image )
                    {
                        let d = document.createElement( 'div' );
                        d.className = 'OGImage';
                        ne.appendChild( d );
                        d.onclick = function()
                        {
                            window.open( el.getAttribute( 'href' ), '_blank' );
                        }
                        
                        let n = document.createElement( 'img' );
                        n.src = ogs.image;
                        n.style.position = 'absolute';
                        n.style.pointerEvents = 'none';
                        self.addDataLoading( n );
                        n.onload = function()
                        {
                            n.style.position = '';
                            ne.classList.add( 'Showing' );
                            n.width = n.naturalWidth;
                            n.height = n.naturalHeight;
                           	self.remDataLoading( n );
                        }
                        if( w && h )
                        {
                        	n.width = w;
                        	n.height = h;
                    	}
                    	else
                    	{
                    		n.width = 1920;
                    		n.height = 1080;
                    	}
                        if( n.width ) n.onload();
                        d.appendChild( n );
                    }
                    else
                    {
                        ne.classList.add( 'Showing' );
                    }
                    
                    ne.appendChild( ln );
                    self.remDataLoading( m );
                }
                m.forceHTTP = true;
                m.execute( 'websitegraph', { 'link': el.getAttribute( 'href' ) } );
            } )( ele );
        }
    }
    replaceUrls( string )
    {
       	let self = this;
       	
       	// Remove all redundant HTML
       	string = string.split( /\<br[\/]{0,1}\>/i ).join( "\n" );
       	string = string.split( /\<[\/]{0,1}div.*?\>/i ).join( "\r" );
       	string = string.split( "\r\r" ).join( "\n" );
       	
        let fnd = 0;
        while( 1 )
        {
            let res = string.match( /[\s]{0,1}http([s]{0,1}\:\/\/[^\s]*)/i );
            if( res != null )
            {
            	if( res[0].indexOf( '"' ) < 0 )
            	{
		            string = string.split( res[0] ).join( '<a class="WebLink" href="fnd' + res[1] + '" contenteditable="false" target="_blank">fnd' + res[1] + '</a>' );
		            fnd++;
		            continue;
	            }
            }
            break;
        }
        
        if( fnd )
        {
            string = string.split( 'fnds://' ).join( 'https://' ).split( 'fnd://' ).join( 'http://' );
        }
        
        // Fix code blocks
        let replacements = 0;
        while( 1 )
        {
		    let tr = string.match( /(```\n([^`]*?)```)/ );
		    if( tr )
		    {
		    	string = string.split( tr[0] ).join( '<codeblock><pre>' + Trim( tr[2] ) + '</pre></codeblock>' );
		    	string = string.split( '<codeblock><br>' ).join( '<codeblock>' );
		    	continue;
			}
			break;
        }
        
        // Restore line breaks
        string = string.split( "\n" ).join( "<br>" );
        
        // Take attachments
        while( 1 )
        {
        	// Etherpad
        	let res = string.match( /[\s]{0,1}\<attachment\ .*?etherpad\=\"(.*?)\"(.*?)\/\>/i );
        	if( res != null )
        	{
        		string = string.split( res[ 0 ] ).join( '<a class="WebLink Centered Bold" contenteditable="false" onclick="ExecuteIt(\'Etherpad\',\'' + res[1] + '\')">' + i18n( 'i18n_collaborate_in_etherpad' ) + '</a>' );
        		continue;
        	}
        	// Images
        	res = string.match( /[\s]{0,1}\<attachment\ .*?image\=\"(.*?)\"(.*?)\/\>/i );
        	if( res != null )
        	{
        		let od = res[1].split( 'getattachment' ).join( 'getoriginal' ) + '&authid=' + Application.authId;
        		
        		let w = 'auto';
        		let h = 'auto';
        		if( typeof res[2] != undefined )
        		{
        			let wh = string.match( /[\s]{0,1}\ width\=\"(.*?)\"\ height\=\"(.*?)\"/i );
        			if( wh && wh.length && parseInt( wh[1] ) > 0 )
        			{
		    			w = wh[1];
		    			h = wh[2];
	    			}
        		}
        		
        		let prestr = document.location.href.split( '/webclient/' )[0] + '/';
        		string = string.split( res[ 0 ] ).join( '<div class="AttachmentElement" contenteditable="false"><a class="Download" target="_blank" href="' + od + '"></a><queued-img od="' + od + '" prestr="' + prestr + '" width="' + w + '" height="' + h + '" src="' + res[1] + '&authid=' + Application.authId + '" class="Attachment"/></div>' );
        		continue;
        	}
        	// Files
        	res = string.match( /[\s]{0,1}\<attachment\ type\=\"download\"\ file\=\"(.*?)\"\ filename=\"(.*?)"\/\>/i );
        	if( res != null )
        	{
        		let od = res[1].split( 'getattachment' ).join( 'getupload' ) + '&authid=' + Application.authId;
        		
        		string = string.split( res[ 0 ] ).join( '<div class="AttachmentElement" contenteditable="false"><a class="DownloadFull" target="_blank" href="' + od + '">' + res[2] + '</a></div>' );
        		continue;
        	}
        	// PDFs
        	res = string.match( /[\s]{0,1}\<attachment\ type\=\"pdf\"\ file\=\"(.*?)\"\ filename=\"(.*?)"\/\>/i );
        	if( res != null )
        	{
        		let od = res[1].split( 'getattachment' ).join( 'getupload' ) + '&authid=' + Application.authId;
        		let lod = '/webclient/3rdparty/pdfjs/web/viewer.html?file=' + encodeURIComponent( od );
        		string = string.split( res[ 0 ] ).join( '<div class="AttachmentElement" contenteditable="false"><div class="Preview PDF" onclick="this.innerHTML = \'<iframe src=\\\'' + lod + '\\\' class=\\\'Attachment\\\'/></iframe>\'"><p>' + i18n( 'i18n_click_to_view_pdf' ) + '</p></div><a class="DownloadFull" target="_blank" href="' + od + '">' + res[2] + '</a></div>' );
        		continue;
        	}
        	break;
        }
        return string;
    }
    replaceEmojis( string )
    {
        let smilies = [ '8)', '8-)', ':-)', ':)', ':-D', ':D', 'X)', 'B)', 'B-)', 'X-)', ':|', ':-|', ':-o', ':o', ':O', ':O', ':(', ':-(',  ';)', ';-)' ];
        let emotes  = [ 'ðŸ¤“', 'ðŸ¤“', 'ðŸ™‚',  'ðŸ™‚', 'ðŸ˜€', 'ðŸ˜€', 'ðŸ˜†', 'ðŸ˜Ž', 'ðŸ˜Ž', 'ðŸ˜†', 'ðŸ˜', 'ðŸ˜', 'ðŸ˜®', 'ðŸ˜®', 'ðŸ˜®', 'ðŸ˜®', 'ðŸ˜’', 'ðŸ˜’', 'ðŸ˜', 'ðŸ˜' ];
        
        // Fix code blocks
        let codeblocks = [];
        while( 1 )
        {
        	let res = string.match( /(\<codeblock\>.*?\<\/codeblock\>)/i );
        	if( !res ) break;
        	codeblocks.push( res[1] );
        	string = string.split( res[1] ).join( '<!--block--' + codeblocks.length + '>' );
        }
        // Fix code divs
        let divblocks = [];
        while( 1 )
        {
        	let res = string.match( /(\<div[^>]*?\>.*?\<\/div\>)/i );
        	if( !res ) break;
        	divblocks.push( res[1] );
        	string = string.split( res[1] ).join( '<!--divblock--' + divblocks.length + '>' );
        }
        
        // Fix links
        let hrefs = [];
        while( 1 )
        {
        	let res = string.match( /(\<a .*?\>.*?\<\/a\>)/i );
        	if( !res ) break;
        	hrefs.push( res[1] );
        	string = string.split( res[1] ).join( '<!--hrefs--' + hrefs.length + '>' );
        }
        
        // Fix emos!
        for( let a = 0; a < smilies.length; a++ )
        {
            string = string.split( smilies[a] ).join( '<span contenteditable="false" class="Emoji">' + emotes[a] + '</span>' );
        }        
        
        while( 1 )
        {
            let res = string.match( /\:(.*?)\:/i );
            if( res && res[0] )
            {
                string = string.split( res[0] ).join( this.emoji( res[1] ) );
            }
            else break;
        }
        
        // Reconstitute div blocks
        if( divblocks.length )
        {
        	let n = 0;
        	while( 1 )
        	{
        		let res = string.match( /\<\!\-\-divblock\-\-([0-9]*?)\>/i );
        		if( !res ) break;
        		string = string.split( res[0] ).join( divblocks[ n++ ] );
        	}
	    }
        
        // Reconstitute code blocks
        if( codeblocks.length )
        {
        	let n = 0;
        	while( 1 )
        	{
        		let res = string.match( /\<\!\-\-block\-\-([0-9]*?)\>/i );
        		if( !res ) break;
        		string = string.split( res[0] ).join( codeblocks[ n++ ] );
        	}
	    }
	    
	    // Reconstitute hrefs
        if( hrefs.length )
        {
        	let n = 0;
        	while( 1 )
        	{
        		let res = string.match( /\<\!\-\-hrefs\-\-([0-9]*?)\>/i );
        		if( !res ) break;
        		string = string.split( res[0] ).join( hrefs[ n++ ] );
        	}
	    }
        
        return string;
    }
    emoji( type )
    {
        let s = '';
        switch( type )
        {
            case 'bug': s = 'ðŸª²'; break;
            case 'sun': s = 'â˜€ï¸'; break;
            case 'heart': s = 'â¤ï¸'; break;
            case 'kiss': s = 'ðŸ’‹'; break;
            case 'y': s = 'ðŸ‘'; break;
            case 'beers': s = 'ðŸ»'; break;
            case 'beer': s = 'ðŸº'; break;
            case 'wine': s = 'ðŸ·'; break;
            case 'sick': s = 'ðŸ˜·'; break;
            case 'fire': s = 'ðŸ”¥'; break;
            default: break;
        }
        return '<span contenteditable="false" class="Emoji">' + s + '</span>';
    }
    destroy()
    {
    	this.destroying = true;
    }
}
FUI.registerClass( 'chatlog', FUIChatlog );

Application.handleImageError = function( ele )
{
	let newnode = document.createElement( 'div' );
	newnode.className = 'ImageError';
	ele.parentNode.replaceChild( newnode, ele );
}

function ExecuteIt( app, arg )
{
	Application.sendMessage( {
		type: 'system',
		command: 'executeapplication',
		executable: app,
		args: arg
	} );
}

Application.handleImageLoad = function( ele, originalFileSrc = false, filename = false )
{
	let messages = FUI.getElementByUniqueId( 'messages' );
	if( messages.destroying ) return;
	
	let mes = document.querySelector( '.Messages' );
	if( !mes ) return;
	if( ele.naturalWidth < ele.parentNode.offsetWidth )
	{
		ele.style.width = ele.naturalWidth + 'px';
		ele.classList.add( 'ActualSize' );
	}
	
	setTimeout( function()
	{
		ele.classList.add( 'Loaded' );
	}, 10 );
	
	// Open the image in image viewer
	ele.onclick = function()
	{
		let ms = {
			type: 'dos',
			method: 'openWindowByFilename',
			args: {
				fileInfo: { Path: originalFileSrc ? originalFileSrc : ele.src, Filename: filename ? filename : 'Convos - Image' },
				ext: 'jpg'
			}
		};
		Application.sendMessage( ms );
	}
	
}

